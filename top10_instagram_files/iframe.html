<!DOCTYPE html>
<!-- saved from url=(0082)https://statistacomdev.cleverpush.com/iframe?origin=https%3A%2F%2Fwww.statista.com -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="dns-prefetch" href="https://static.cleverpush.com/">
    <link rel="preconnect" href="https://static.cleverpush.com/" crossorigin="">
    <link rel="dns-prefetch" href="https://api.cleverpush.com/">
    <link rel="preconnect" href="https://api.cleverpush.com/" crossorigin="">

    <meta name="robots" content="noindex">

    <link rel="manifest" href="https://statistacomdev.cleverpush.com/cleverpush-manifest.json">

    <script>!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var i=n(20),r=n(7),o=i.methodFactory,s=i.getLogger("cleverpush"),a=Object(r.d)().toUpperCase();function c(e){return JSON.stringify(e,(function(e,t){return"function"==typeof t?"[Function]":t}),4)}function u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s.debug("Called %c".concat(e,"(").concat(n.map(c).join(", "),")"),"code"===(r="code")?'\n    padding: 0 1px 1px 5px;\n    border: 1px solid #ddd;\n    border-radius: 3px;\n    font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;\n    color: #444;\n    ':"bold"===r?"\n    font-weight: 600;\n    color: rgb(51, 51, 51);\n    ":"alert"===r?"\n    font-weight: 600;\n    color: red;\n    ":"",".");var r}s.methodFactory=function(e,t,n){var i=o(e,t,n);return function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];0===t&&"string"==typeof arguments[t]&&(n="[CleverPush][".concat(a,"] ").concat(n)),e.push(n)}i.apply(this,e)}},s.setLevel(s.getLevel(),!1)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(6),r=n.n(i),o=n(9),s=n.n(o),a=n(4),c=n.n(a),u=n(5),l=n.n(u),d=n(10),f=n.n(d),h=n(23),p=function(e){function t(e,n){var i;return r()(this,t),(i=s()(this,c()(t).call(this,e))).name=i.constructor.name,i.reason=n,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(l()(i),i.constructor):i.stack=new Error(e).stack,i}return f()(t,e),t}(n.n(h)()(Error))},function(e,t,n){"use strict";var i=n(15),r=n.n(i),o={en:{"confirm.title":"{0} wants to send you push notifications.","confirm.nativeTitle":"{0} wants to send you notifications","confirm.info":"Notifications can be turned off anytime from browser settings.","confirm.allow":"Allow","confirm.allowChrome":"Allow","confirm.allowFirefox":"Allow Notifications","confirm.allowEdge":"Yes","confirm.deny":"Deny","confirm.selectTopics":"To which topics do you want to receive notifications?","confirm.doubleText":"Please click on {0} 2x to continue","confirm.alreadySubscribed":"You have already subscribed to all topics.","confirm.silentPromptInfo":'Please click on the small bell and then on "Allow" to continue.',"popup.info":"Click on {0} to confirm push notifications","popup.text":"Get updates and offers from {0} by subscribing to push notifications.","unsubscribe.title":"Unsubscribe from notifications","unsubscribe.confirm":"Are you sure?","unsubscribe.yes":"Yes","unsubscribe.no":"No","unsubscribe.feedback":"Please choose the unsubscribe reason to complete your unsubscription:","unsubscribe.enterReason":"Please enter the reason:","unsubscribe.submit":"Submit","unsubscribe.reasonQuantity":"Too many messages","unsubscribe.reasonContent":"Not interesting messages","unsubscribe.reasonOther":"Other reason","windowclose.confirm":"The process is not yet complete, are you sure you want to cancel it?","deny.alertHttps":"If you change your mind, click the lock to give your browser permission to send you notifications.","deny.alertHttp":"If you change your mind, click the info symbol to give your browser permission to send you notifications.","bell.subscribe":"Subscribe for notifications","bell.subscribed":"You're subscribed for notifications","bell.unsubscribeSuccess":"You won't receive notifications again","bell.hide":"Do not show again","panel.notifications":"Notifications","panel.editTopics":"Edit Topics","panel.settings":"Settings","panel.notificationsEmpty":"No notifications available.","panel.save":"Save","panel.close":"Close","panel.successfullySaved":"Successfully saved!","unblock.title":"You have blocked notifications.<br />Please follow these steps to receive notifications",privacy:"Privacy"},de:{"confirm.title":"{0} würde dir gerne Push Nachrichten senden.","confirm.nativeTitle":"{0} möchte Ihnen Benachrichtigungen senden","confirm.info":"Benachrichtigungen können jederzeit in den Browser Einstellungen deaktiviert werden.","confirm.allow":"Erlauben","confirm.allowChrome":"Zulassen","confirm.allowFirefox":"Benachrichtigungen erlauben","confirm.allowEdge":"Ja","confirm.deny":"Verbieten","confirm.selectTopics":"Zu welchen Themen möchtest du Push Nachrichten erhalten?","confirm.doubleText":"Bitte bestätige 2x mit {0} um fortzufahren","confirm.alreadySubscribed":"Du hast dich bereits für alle Themen angemeldet.","confirm.silentPromptInfo":'Bitte klicke auf die kleine Glocke und dann auf "Erlauben" um fortzufahren.',"popup.info":"Klicke auf {0}, um unsere Push-Benachrichtigungen zu bestätigen","popup.text":"Erhalte Updates und Angebote von {0}, indem du Push-Benachrichtigungen abonnierst.","unsubscribe.title":"Von Benachrichtigungen abmelden","unsubscribe.confirm":"Bist du dir sicher?","unsubscribe.yes":"Ja","unsubscribe.no":"Nein","unsubscribe.feedback":"Bitte wähle den Abmelde-Grund aus um deine Abmeldung zu bestätigen:","unsubscribe.enterReason":"Bitte gib den Grund ein:","unsubscribe.submit":"Absenden","unsubscribe.reasonQuantity":"Zu viele Nachrichten","unsubscribe.reasonContent":"Uninteressante Nachrichten","unsubscribe.reasonOther":"Anderer Grund","windowclose.confirm":"Der Vorgang ist noch nicht abgeschlossen, bist du sicher, dass du ihn abbrechen möchtest?","deny.alertHttps":'Wenn du doch Benachrichtigungen empfangen möchtest, kannst du mit einem Klick auf das Schloss die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"deny.alertHttp":'Wenn du doch Benachrichtigungen empfangen möchtest, kannst du mit einem Klick auf das Info-Symbol die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"bell.subscribe":"Für Benachrichtigungen anmelden","bell.subscribed":"Du bist für Benachrichtigungen angemeldet","bell.unsubscribeSuccess":"Du wirst keine Benachrichtigungen mehr erhalten","bell.hide":"Nicht mehr anzeigen","panel.notifications":"Nachrichten","panel.editTopics":"Themenbereiche bearbeiten","panel.settings":"Einstellungen","panel.notificationsEmpty":"Keine Nachrichten vorhanden.","panel.save":"Speichern","panel.close":"Schlie&szlig;en","panel.successfullySaved":"Erfolgreich gespeichert!","unblock.title":"Du hast Benachrichtigungen blockiert.<br />Bitte folge diesen Schritten um Benachrichtigungen zu empfangen",privacy:"Datenschutz"},"de-formal":{"confirm.title":"{0} würde Ihnen gerne Push Nachrichten senden.","confirm.nativeTitle":"{0} möchte Ihnen Benachrichtigungen senden","confirm.info":"Benachrichtigungen können jederzeit in den Browser Einstellungen deaktiviert werden.","confirm.allow":"Erlauben","confirm.allowChrome":"Zulassen","confirm.allowFirefox":"Benachrichtigungen erlauben","confirm.allowEdge":"Ja","confirm.deny":"Verbieten","confirm.selectTopics":"Zu welchen Themen möchten Sie Push Nachrichten erhalten?","confirm.doubleText":"Bitte bestätigen Sie 2x mit {0} um fortzufahren","confirm.alreadySubscribed":"Sie haben sich bereits für alle Themen angemeldet.","confirm.silentPromptInfo":'Bitte klicken Sie auf die kleine Glocke und dann auf "Erlauben" um fortzufahren.',"popup.info":"Klicken Sie auf {0}, um unsere Push-Benachrichtigungen zu bestätigen","popup.text":"Erhalten Sie Updates und Angebote von {0}, indem Sie Push-Benachrichtigungen abonnieren.","unsubscribe.title":"Von Benachrichtigungen abmelden","unsubscribe.confirm":"Sind Sie sich sicher?","unsubscribe.yes":"Ja","unsubscribe.no":"Nein","unsubscribe.feedback":"Bitte wählen Sie den Abmelde-Grund aus um Ihre Abmeldung zu bestätigen:","unsubscribe.enterReason":"Bitte geben Sie den Grund ein:","unsubscribe.submit":"Absenden","unsubscribe.reasonQuantity":"Zu viele Nachrichten","unsubscribe.reasonContent":"Uninteressante Nachrichten","unsubscribe.reasonOther":"Anderer Grund","windowclose.confirm":"Der Vorgang ist noch nicht abgeschlossen, sind Sie sich sicher, dass Sie ihn abbrechen möchten?","deny.alertHttps":'Wenn Sie doch Benachrichtigungen empfangen möchten, können Sie mit einem Klick auf das Schloss die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"deny.alertHttp":'Wenn Sie doch Benachrichtigungen empfangen möchten, können Sie mit einem Klick auf das Info-Symbol die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"bell.subscribe":"Für Benachrichtigungen anmelden","bell.subscribed":"Sie sind für Benachrichtigungen angemeldet","bell.unsubscribeSuccess":"Sie werden keine Benachrichtigungen mehr erhalten","panel.notifications":"Benachrichtigungen","panel.editTopics":"Themenbereiche bearbeiten","panel.settings":"Einstellungen","panel.notificationsEmpty":"Keine Benachrichtigungen vorhanden.","panel.save":"Speichern","panel.close":"Schlie&szlig;en","panel.successfullySaved":"Erfolgreich gespeichert!","unblock.title":"Sie haben Benachrichtigungen blockiert.<br />Bitte folgen Sie diesen Schritten um Benachrichtigungen zu empfangen",privacy:"Datenschutz"}},s=n(0);function a(e){var t=(window.CleverPush||{config:{}}).config.language||navigator.language||navigator.userLanguage||"en";t="de-formal"!==t?t.substr(0,2).toLowerCase():t,o.hasOwnProperty(t)||(t="en");var n,i=e;if("confirm.allowBrowser"===i){i="confirm.allow";var s=new r.a;"Chrome"===s.getBrowser().name?i="confirm.allowChrome":"Firefox"===s.getBrowser().name?i="confirm.allowFirefox":"Edge"===s.getBrowser().name&&(i="confirm.allowEdge")}else"deny.alert"===i&&(i="https:"===location.protocol?"deny.alertHttps":"deny.alertHttp");if(o[t].hasOwnProperty(i)?n=o[t][i]:o.en.hasOwnProperty(i)&&(n=o.en[i]),n){var a=(document.characterSet||"").toLowerCase();if(a.indexOf("windows-1252")>-1||a.indexOf("iso-8859")>-1)try{return decodeURIComponent(escape(n))}catch(e){}return n}return i}function c(e){var t=e,n=(document.characterSet||"").toLowerCase();if(n.indexOf("windows-1252")>-1||n.indexOf("iso-8859")>-1)try{t=decodeURIComponent(escape(e))}catch(e){s.a.debug(e)}return t}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c})),String.prototype.formatCleverPush=function(){var e=this;for(var t in arguments)arguments.hasOwnProperty(t)&&(e=e.replace("{".concat(t,"}"),arguments[t]));return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(6),r=n.n(i),o=n(12),s=n.n(o),a=function e(){r()(this,e)};s()(a,"INITIALIZED","initialized"),s()(a,"INITIALIZATION_FAILED","initializationFailed"),s()(a,"SUBSCRIBED","subscribed"),s()(a,"UNSUBSCRIBED","unsubscribed"),s()(a,"OPTIN_SHOWN","optInShown"),s()(a,"PERMISSION_GRANTED","permissionGranted"),s()(a,"TOPICS_SET","topicsSet"),s()(a,"BELL_READY","bellReady"),s()(a,"PERMISSION_RE_GRANTED","permissionReGranted"),s()(a,"PANEL_SHOWN","panelShown"),s()(a,"PANEL_HIDDEN","panelHidden")},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return w})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return k})),n.d(t,"i",(function(){return I}));var i=n(11),r=n.n(i),o=n(15),s=n.n(o),a=n(1),c="serviceWorker",u="host",l="popup",d="iframe",f="customSubdomain",h=new s.a,p=h.getBrowser(),b=h.getOS(),g=h.getDevice(),v=p.version?p.version.split("."):["0"],m=p.version?parseInt(v[0],10):0;v.length>1&&parseInt(v[1],10);function w(e){if("undefined"!=typeof window){if(window===window.top){var t=e;t||(t=(window.CleverPush||{}).config||{});var n=t.cleverpushDomain;if(location.hostname.indexOf(".cleverpush.com")>-1){if(0===location.pathname.indexOf("/subscribe"))return l}else if(n&&location.hostname.indexOf("."+n)>-1&&0===location.pathname.indexOf("/subscribe"))return l;return u}return 0===location.pathname.indexOf("/iframe")||0===location.pathname.indexOf("/referrals")?d:f}return"undefined"!=typeof WorkerLocation&&location instanceof WorkerLocation?c:null}function y(){return"undefined"!=typeof window}function S(e){return w(e)===l&&y()}function _(){return location.hostname.indexOf(".cleverpush.com")>-1&&0===location.pathname.indexOf("/unsubscribe")&&y()}function k(e){return w(e)===d&&y()}function I(){var e=!0,t=null;return new Promise((function(n,i){new Promise((function(e){var t=function(){return e(!0)},n=function(){return e(!1)};if(!window.webkitRequestFileSystem){if("MozAppearance"in document.documentElement.style){var i=indexedDB.open("test");return i.onerror=t,void(i.onsuccess=n)}if(/constructor/i.test(window.HTMLElement)||navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&navigator.userAgent.indexOf("CriOS")<0&&navigator.userAgent.indexOf("FxiOS")<0){if(void 0!==window.openDatabase)try{window.openDatabase(null,null,null,null),window.localStorage.setItem("test",1)}catch(e){return t()}return function(){try{localStorage.length?n():(localStorage.x=1,localStorage.removeItem("x"),n())}catch(e){navigator.cookieEnabled?t():n()}}()}return window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?n():t()}window.webkitRequestFileSystem(0,0,n,t)})).then((function(o){o?(e=!1,t=null,i(new a.a("Private browsing mode not supported.","private-mode"))):("safari"in window&&"object"===r()(window.safari)&&"pushNotification"in window.safari?t="safari":void 0!==window.Notification&&("serviceWorker"in navigator||"http:"===location.protocol)?t="w3c":(e=!1,t=null,i(new a.a("Browser is not supported.","unsupported-browser"))),e&&"safari"!==t&&"ios"!==t&&("http:"===location.protocol||"showNotification"in ServiceWorkerRegistration.prototype?"PushManager"in window||(e=!1,i(new a.a("Push messaging isn't supported.","unsupported-browser"))):(e=!1,i(new a.a("Notifications aren't supported.","unsupported-browser"))),"serviceWorker"in navigator||"http:"===location.protocol||(e=!1,i(new a.a("Service workers are not supported.","unsupported-browser"))),navigator.userAgent.indexOf("Iron")>-1&&navigator.userAgent.indexOf("Chrome")>-1&&(e=!1,i(new a.a("SRWare Iron does not support push","unsupported-browser")))),e&&(window.self===window.top&&"w3c"===t&&navigator.serviceWorker&&"function"==typeof navigator.serviceWorker.getRegistrations?navigator.serviceWorker.getRegistrations().then((function(){return n(t)})).catch((function(){return i(new a.a("Service workers are not supported","unsupported-browser"))})):n(t)))}))}))}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i=n(11),r=n(5);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t}},function(e,t,n){var i=n(19);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var i=n(22);function r(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,n){var r=i(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},r(t,n,o||t)}e.exports=r},function(e,t,n){"use strict";(function(e){var i=n(24),r=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function s(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void l(t.promise,e)}u(t.promise,i)}else(1===e._state?u:l)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void h((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(t){l(e,t)}var i,r}function l(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(e){if(n)return;n=!0,l(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(s);return c(this,new f(e,t,n)),n},a.prototype.finally=i.a,a.all=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var r=i.length;function s(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(t){s(e,t)}),n)}i[e]=o,0==--r&&t(i)}catch(e){n(e)}}for(var a=0;a<i.length;a++)s(a,i[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,r=e.length;i<r;i++)a.resolve(e[i]).then(t,n)}))},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){r(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=a}).call(this,n(30).setImmediate)},function(e,t,n){var i;!function(r,o){"use strict";var s="model",a="name",c="type",u="vendor",l="version",d="mobile",f="tablet",h="smarttv",p={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(e,t){for(var n,i,r,o,s,a,c=0;c<t.length&&!s;){var u=t[c],l=t[c+1];for(n=i=0;n<u.length&&!s;)if(s=u[n++].exec(e))for(r=0;r<l.length;r++)a=s[++i],"object"==typeof(o=l[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;c+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(p.has(t[n][i],e))return"?"===n?void 0:n}else if(p.has(t[n],e))return"?"===n?void 0:n;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,l],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[a,l],[/(konqueror)\/([\w\.]+)/i],[[a,"Konqueror"],l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],l],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[a,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],l],[/(Avast)\/([\w\.]+)/i],[[a,"Avast Secure Browser"],l],[/(AVG)\/([\w\.]+)/i],[[a,"AVG Secure Browser"],l],[/(puffin)\/([\w\.]+)/i],[[a,"Puffin"],l],[/(focus)\/([\w\.]+)/i],[[a,"Firefox Focus"],l],[/(opt)\/([\w\.]+)/i],[[a,"Opera Touch"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],l],[/(windowswechat qbcore)\/([\w\.]+)/i],[[a,"WeChat(Win) Desktop"],l],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],l],[/(brave)\/([\w\.]+)/i],[[a,"Brave"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[a,l],[/(QQ)\/([\d\.]+)/i],[a,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[a,l],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[a,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[a,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[a],[/(LBBROWSER)/i],[a],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[a,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[a,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[a,l],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[a,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[a,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[a,"Sailfish Browser"],l],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,l],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],l],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[a,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[a,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,a],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[a,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[l,b.str,g.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[a,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[s,u,[c,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[u,"Apple"],[c,f]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[u,"Apple"],[c,h]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,s,[c,f]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[s,[u,"Amazon"],[c,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[s,b.str,g.device.amazon.model],[u,"Amazon"],[c,d]],[/android.+aft([bms])\sbuild/i],[s,[u,"Amazon"],[c,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,u,[c,d]],[/\((ip[honed|\s\w*]+);/i],[s,[u,"Apple"],[c,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,s,[c,d]],[/\(bb10;\s(\w+)/i],[s,[u,"BlackBerry"],[c,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[s,[u,"Asus"],[c,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[s,"Xperia Tablet"],[c,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,"Sony"],[c,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,s,[c,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[u,"Nvidia"],[c,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[u,"Sony"],[c,"console"]],[/(sprint\s(\w+))/i],[[u,b.str,g.device.sprint.vendor],[s,b.str,g.device.sprint.model],[c,d]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[s,/_/g," "],[c,d]],[/(nexus\s9)/i],[s,[u,"HTC"],[c,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[s,[u,"Huawei"],[c,d]],[/android.+(bah2?-a?[lw]\d{2})/i],[s,[u,"Huawei"],[c,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,s,[c,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[u,"Microsoft"],[c,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,"Microsoft"],[c,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[u,"Motorola"],[c,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[u,"Motorola"],[c,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,p.trim],[s,p.trim],[c,h]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,"Samsung"],[c,h]],[/\(dtv[\);].+(aquos)/i],[s,[u,"Sharp"],[c,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],s,[c,f]],[/smart-tv.+(samsung)/i],[u,[c,h],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[u,"Samsung"],s,[c,d]],[/sie-(\w*)/i],[s,[u,"Siemens"],[c,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[u,"Nokia"],s,[c,d]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[s,[u,"Acer"],[c,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[s,[u,"LG"],[c,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],s,[c,f]],[/(lg) netcast\.tv/i],[u,s,[c,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[s,[u,"LG"],[c,d]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[u,s,[c,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[u,"Lenovo"],[c,f]],[/(lenovo)[_\s-]?([\w-]+)/i],[u,s,[c,d]],[/linux;.+((jolla));/i],[u,s,[c,d]],[/((pebble))app\/[\d\.]+\s/i],[u,s,[c,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,s,[c,d]],[/crkey/i],[[s,"Chromecast"],[u,"Google"],[c,h]],[/android.+;\s(glass)\s\d/i],[s,[u,"Google"],[c,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[s,[u,"Google"],[c,f]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[s,[u,"Google"],[c,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[u,"Xiaomi"],[c,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[u,"Xiaomi"],[c,f]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[s,[u,"Meizu"],[c,d]],[/(mz)-([\w-]{2,})/i],[[u,"Meizu"],s,[c,d]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[s,[u,"OnePlus"],[c,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[s,[u,"RCA"],[c,f]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[s,[u,"Dell"],[c,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[s,[u,"Verizon"],[c,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[u,"Barnes & Noble"],s,[c,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[s,[u,"NuVision"],[c,f]],[/android.+;\s(k88)\sbuild/i],[s,[u,"ZTE"],[c,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[s,[u,"Swiss"],[c,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[s,[u,"Swiss"],[c,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[s,[u,"Zeki"],[c,f]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[u,"Dragon Touch"],s,[c,f]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[s,[u,"Insignia"],[c,f]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[s,[u,"NextBook"],[c,f]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[u,"Voice"],s,[c,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[u,"LvTel"],s,[c,d]],[/android.+;\s(PH-1)\s/i],[s,[u,"Essential"],[c,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[s,[u,"Envizen"],[c,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[u,s,[c,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[s,[u,"MachSpeed"],[c,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[u,s,[c,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[s,[u,"Rotor"],[c,f]],[/android.+(KS(.+))\s+build/i],[s,[u,"Amazon"],[c,f]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[u,s,[c,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,p.lowerize],u,s],[/[\s\/\(](smart-?tv)[;\)]/i],[[c,h]],[/(android[\w\.\s\-]{0,9});.+build/i],[s,[u,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[a,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[a,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[l,b.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[l,b.str,g.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[a,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[a,"Symbian"],l],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[a,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[a,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[a,l],[/(haiku)\s(\w+)/i],[a,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[a,l]]},m=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof m))return new m(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?p.extend(v,t):v;return this.getBrowser=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,n,i.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return b.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return b.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};m.VERSION="0.7.21",m.BROWSER={NAME:a,MAJOR:"major",VERSION:l},m.CPU={ARCHITECTURE:"architecture"},m.DEVICE={MODEL:s,VENDOR:u,TYPE:c,CONSOLE:"console",MOBILE:d,SMARTTV:h,TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},m.ENGINE={NAME:a,VERSION:l},m.OS={NAME:a,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=m),t.UAParser=m):void 0===(i=function(){return m}.call(t,n,t,e))||(e.exports=i);var w=r&&(r.jQuery||r.Zepto);if(w&&!w.ua){var y=new m;w.ua=y.getResult(),w.ua.get=function(){return y.getUA()},w.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var n in t)w.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";function i(){return new Promise((function(e){if("complete"===document.readyState)e();else{var t=function t(){e(),document.removeEventListener("DOMContentLoaded",t,!0),window.removeEventListener("load",t,!0)};document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",t,!0)}}))}function r(){return new Promise((function(e){"loading"!==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",(function(){"loading"!==document.readyState&&e()}))}))}function o(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t}function s(e,t,n){e.style.opacity=0;var i=+new Date;!function r(){var o=+e.style.opacity+(new Date-i)/t;o>1&&(o=1),e.style.opacity=o,i=+new Date,+e.style.opacity<1?window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16):"function"==typeof n&&n()}()}function a(e,t,n){e.style.opacity=1;var i=+new Date;!function r(){var o=+e.style.opacity-(new Date-i)/t;o<0&&(o=0),e.style.opacity=o,i=+new Date,+e.style.opacity>0?window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16):"function"==typeof n&&n()}()}n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ERR_IFRAME_ALREADY_ATTACHED_TO_DOM=t.ERR_NOT_IN_IFRAME=t.ERR_CONNECTION_TIMEOUT=t.ERR_CONNECTION_DESTROYED=void 0;var i="message";t.ERR_CONNECTION_DESTROYED="ConnectionDestroyed";t.ERR_CONNECTION_TIMEOUT="ConnectionTimeout";t.ERR_NOT_IN_IFRAME="NotInIframe";t.ERR_IFRAME_ALREADY_ATTACHED_TO_DOM="IframeAlreadyAttachedToDom";var r,o={"http:":"80","https:":"443"},s=/^(https?:|file:)?\/\/([^/:]+)?(:(\d+))?/,a={ERR_CONNECTION_DESTROYED:"ConnectionDestroyed",ERR_CONNECTION_TIMEOUT:"ConnectionTimeout",ERR_NOT_IN_IFRAME:"NotInIframe",ERR_IFRAME_ALREADY_ATTACHED_TO_DOM:"IframeAlreadyAttachedToDom",Promise:function(){try{return window?window.Promise:null}catch(e){return null}}(),debug:!1},c=(r=0,function(){return++r}),u=function(){if(a.debug){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,["[Penpal]"].concat(n))}},l=function(e){var t=[];return e((function(){t.forEach((function(e){e()}))})),{then:function(e){t.push(e)}}},d=function(e){return{name:e.name,message:e.message,stack:e.stack}},f=function(e){var t=new Error;return Object.keys(e).forEach((function(n){return t[n]=e[n]})),t},h=function(e,t,n,r,o){var s=t.localName,l=t.local,d=t.remote,h=t.remoteOrigin,p=!1;u("".concat(s,": Connecting call sender"));o.then((function(){p=!0})),n.reduce((function(e,t){return e[t]=function(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(u("".concat(s,": Sending ").concat(e,"() call")),d.closed&&r(),p){var b=new Error("Unable to send ".concat(e,"() call due ")+"to destroyed connection");throw b.code="ConnectionDestroyed",b}return new a.Promise((function(t,r){var o=c();l.addEventListener(i,(function n(a){if(a.source===d&&a.origin===h&&"reply"===a.data.penpal&&a.data.id===o){u("".concat(s,": Received ").concat(e,"() reply")),l.removeEventListener(i,n);var c=a.data.returnValue;a.data.returnValueIsError&&(c=f(c)),("fulfilled"===a.data.resolution?t:r)(c)}})),d.postMessage({penpal:"call",id:o,methodName:e,args:n},h)}))}}(t),e}),e)},p=function(e,t,n){var r=e.localName,o=e.local,s=e.remote,c=e.remoteOrigin,l=!1;u("".concat(r,": Connecting call receiver"));var f=function(e){if(e.source===s&&e.origin===c&&"call"===e.data.penpal){var n=e.data,i=n.methodName,o=n.args,f=n.id;if(u("".concat(r,": Received ").concat(i,"() call")),i in t){var h=function(e){return function(t){if(u("".concat(r,": Sending ").concat(i,"() reply")),l)u("".concat(r,": Unable to send ").concat(i,"() reply due to destroyed connection"));else{var n={penpal:"reply",id:f,resolution:e,returnValue:t};"rejected"===e&&t instanceof Error&&(n.returnValue=d(t),n.returnValueIsError=!0);try{s.postMessage(n,c)}catch(e){throw"DataCloneError"===e.name&&s.postMessage({penpal:"reply",id:f,resolution:"rejected",returnValue:d(e),returnValueIsError:!0},c),e}}}};new a.Promise((function(e){return e(t[i].apply(t,o))})).then(h("fulfilled"),h("rejected"))}}};o.addEventListener(i,f),n.then((function(){l=!0,o.removeEventListener(i,f)}))};a.connectToChild=function(e){var t,n=e.url,r=e.appendTo,c=e.iframe,d=e.methods,f=void 0===d?{}:d,b=e.timeout;if(c&&c.parentNode){var g=new Error("connectToChild() must not be called with an iframe already attached to DOM");throw g.code="IframeAlreadyAttachedToDom",g}var v=new l((function(e){t=e})),m=window;(c=c||document.createElement("iframe")).src=n;var w=function(e){var t,n,i,r=document.location,a=s.exec(e);if(a?(t=a[1]?a[1]:r.protocol,n=a[2],i=a[4]):(t=r.protocol,n=r.hostname,i=r.port),"file:"===t)return"null";var c=i&&i!==o[t]?":".concat(i):"";return"".concat(t,"//").concat(n).concat(c)}(n);return{promise:new a.Promise((function(e,n){var o;void 0!==b&&(o=setTimeout((function(){var e=new Error("Connection to child timed out after ".concat(b,"ms"));e.code="ConnectionTimeout",n(e),t()}),b));var s,a,d={},g=function(n){var i=c.contentWindow;if(n.source===i&&n.origin===w&&"handshake"===n.data.penpal){u("Parent: Received handshake, sending reply");var r="null"===n.origin?"*":n.origin;n.source.postMessage({penpal:"handshake-reply",methodNames:Object.keys(f)},r);var b={localName:"Parent",local:m,remote:i,remoteOrigin:r};a&&a();var g=new l((function(e){v.then(e),a=e}));p(b,f,g),s&&s.forEach((function(e){delete d[e]})),s=n.data.methodNames,h(d,b,s,t,v),clearTimeout(o),e(d)}};m.addEventListener(i,g),u("Parent: Loading iframe"),(r||document.body).appendChild(c);var y=setInterval((function(){document.contains(c)||(clearInterval(y),t())}),6e4);v.then((function(){c.parentNode&&c.parentNode.removeChild(c),m.removeEventListener(i,g),clearInterval(y);var e=new Error("Connection destroyed");e.code="ConnectionDestroyed",n(e)}))})),iframe:c,destroy:t}},a.connectToParent=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.parentOrigin,r=void 0===n?"*":n,o=t.methods,s=void 0===o?{}:o,c=t.timeout;if(window===window.top){var d=new Error("connectToParent() must be called within an iframe");throw d.code="NotInIframe",d}var f=new l((function(t){e=t})),b=window,g=b.parent,v=new a.Promise((function(t,n){var o;void 0!==c&&(o=setTimeout((function(){var t=new Error("Connection to parent timed out after ".concat(c,"ms"));t.code="ConnectionTimeout",n(t),e()}),c));var a=function n(a){if(("*"===r||r===a.origin)&&a.source===g&&"handshake-reply"===a.data.penpal){u("Child: Received handshake reply"),b.removeEventListener(i,n);var c={localName:"Child",local:b,remote:g,remoteOrigin:a.origin},l={};p(c,s,f),h(l,c,a.data.methodNames,e,f),clearTimeout(o),t(l)}};b.addEventListener(i,a),f.then((function(){b.removeEventListener(i,a);var e=new Error("Connection destroyed");e.code="ConnectionDestroyed",n(e)})),u("Child: Sending handshake"),g.postMessage({penpal:"handshake",methodNames:Object.keys(s)},r)}));return{promise:v,destroy:e}};var b=a;t.default=b},function(e,t,n){var i;!function(t){"use strict";function r(){}var o=r.prototype,s=t.EventEmitter;function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},o.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),r="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===a(i[n],t)&&i[n].push(r?t:{listener:t,once:!1});return this},o.on=c("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=c("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,i,r=this.getListenersAsObject(e);for(i in r)r.hasOwnProperty(i)&&-1!==(n=a(r[i],t))&&r[i].splice(n,1);return this},o.off=c("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},o.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},o.removeAllListeners=c("removeEvent"),o.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),r=0;r<n.length;r++)!0===(i=n[r]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},o.trigger=c("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return t.EventEmitter=s,r},void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i)}(this||{})},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t,n){var i,r;!function(o,s){"use strict";void 0===(r="function"==typeof(i=function(){var e=function(){},t="undefined",n=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function r(t,i){for(var r=0;r<n.length;r++){var o=n[r];this[o]=r<t?e:this.methodFactory(o,t,i)}this.log=this.debug}function o(e,n,i){return function(){typeof console!==t&&(r.call(this,n,i),this[e].apply(this,arguments))}}function s(n,r,s){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&(void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}(n)||o.apply(this,arguments)}function a(e,i,o){var a,c=this,u="loglevel";function l(){var e;if(typeof window!==t){try{e=window.localStorage[u]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(u)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===c.levels[e]&&(e=void 0),e}}e&&(u+=":"+e),c.name=e,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=o||s,c.getLevel=function(){return a},c.setLevel=function(i,o){if("string"==typeof i&&void 0!==c.levels[i.toUpperCase()]&&(i=c.levels[i.toUpperCase()]),!("number"==typeof i&&i>=0&&i<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+i;if(a=i,!1!==o&&function(e){var i=(n[e]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[u]=i)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+i+";"}catch(e){}}}(i),r.call(c,i,e),typeof console===t&&i<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(e){l()||c.setLevel(e,!1)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)};var d=l();null==d&&(d=null==i?"WARN":i),c.setLevel(d,!1)}var c=new a,u={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new a(e,c.getLevel(),c.methodFactory)),t};var l=typeof window!==t?window.log:void 0;return c.noConflict=function(){return typeof window!==t&&window.log===c&&(window.log=l),c},c.getLoggers=function(){return u},c})?i.call(t,n,t,e):i)||(e.exports=r)}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t,n){var i=n(4),r=n(19),o=n(28),s=n(29);function a(t){var n="function"==typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return s(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},a(t)}e.exports=a},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){var i=n(22),r=n(12);function o(e,t,n,s){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var s,a=i(e,t);if(a){if((s=Object.getOwnPropertyDescriptor(a,t)).set)return s.set.call(o,n),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(o,t)){if(!s.writable)return!1;s.value=n,Object.defineProperty(o,t,s)}else r(o,t,n);return!0})(e,t,n,s)}e.exports=function(e,t,n,i,r){if(!o(e,t,n,i||e)&&r)throw new Error("failed to set property");return n}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Panel}));var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),_utils_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_utils_translate__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),_utils_debug__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),_const_event__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),Panel=function(){function Panel(e,t,n,i){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,Panel),this.config=e,this.subscriptionManager=t,this.triggerEvent=n,this.api=i,__webpack_require__(!function(){var e=new Error("Cannot find module './panel.scss'");throw e.code="MODULE_NOT_FOUND",e}()),this.tab=e.hidePanelNotifications?"settings":"notifications"}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Panel,[{key:"show",value:function(){if(!this.panel){var e="cleverpush-panel";e+=" cleverpush-panel-position-"+(this.config.notificationBellPosition||"left"),document.querySelector("body").appendChild(Object(_utils_dom__WEBPACK_IMPORTED_MODULE_2__.a)('<div class="'+e+'"><button class="cleverpush-panel-close" type="button">&times;</button><div class="cleverpush-panel-content"></div></div>'))}this.panel=document.querySelector(".cleverpush-panel"),this.closeButton=this.panel.querySelector(".cleverpush-panel-close"),this.closeButton&&this.closeButton.addEventListener("click",this.onCloseClick.bind(this)),this.showPanelContent(),this.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_5__.a.PANEL_SHOWN),this.api&&this.api.trackPanel(null,"opened")}},{key:"hide",value:function(){this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.panel=null,this.closeButton=null,this.footerCloseButton=null,this.tabButtons=null,this.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_5__.a.PANEL_HIDDEN)}},{key:"onCloseClick",value:function(e){e.preventDefault(),this.hide()}},{key:"onUnsubscribeClick",value:function(e){confirm(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("unsubscribe.confirm"))&&(this.onCloseClick(e),this.subscriptionManager.unsubscribe())}},{key:"setTab",value:function(e){this.tab=e,this.showPanelContent()}},{key:"onTabButtonClick",value:function(e){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_4__.b)("onTabButtonClick",e.currentTarget.dataset.tab),e.preventDefault(),this.setTab(e.currentTarget.dataset.tab||"notifications")}},{key:"openNotification",value:function(e){e.preventDefault(),window.open(e.currentTarget.dataset.url,"_blank"),this.api&&this.api.trackPanel(e.currentTarget.dataset.id,"clicked")}},{key:"timeString",value:function(e){var t=e.toISOString().substring(0,10);t+=" ";var n=e.getHours();n<10&&(n="0"+n);var i=e.getMinutes();return i<10&&(i="0"+i),t+=n+":"+i}},{key:"showPanelContent",value:function showPanelContent(){var _this=this,panelContent=this.panel.querySelector(".cleverpush-panel-content"),content=this.config.hidePanelNotifications?"":'<div class="cleverpush-panel-buttons">\n<button type="button" class="cleverpush-panel-button'.concat("notifications"===this.tab?" active":"",'" data-tab="notifications">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.notifications"),"</button>")+'<button type="button" class="cleverpush-panel-button'.concat("settings"===this.tab?" active":"",'" data-tab="settings">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.settings"),"</button>")+"</div>";this.config.notificationBellColor&&(content+="<style>.cleverpush-panel-button.active, .cleverpush-panel-button:hover, .cleverpush-panel-settings button, .cleverpush-panel-settings button:hover, .cleverpush-panel-footer button, .cleverpush-panel-footer button:hover { background-color: "+this.config.notificationBellColor+"; }</style>"),content+='\n    <div class="cleverpush-panel-header" style="border-bottom-color: '.concat(this.config.notificationBellColor||"",'"><img src="').concat(this.config.channelIcon,'"></div>\n    ');var setPanelContent=function(e){panelContent.innerHTML=e+'<div class="cleverpush-panel-footer"><button type="button" class="cleverpush-panel-footer-close">'.concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.close"),'</button><div class="cleverpush-panel-branding">').concat(_this.getBrandingLinks(),"</div></div>"),_this.footerCloseButton=_this.panel.querySelector(".cleverpush-panel-footer-close"),_this.footerCloseButton&&_this.footerCloseButton.addEventListener("click",_this.onCloseClick.bind(_this)),_this.tabButtons=_this.panel.querySelectorAll(".cleverpush-panel-button");for(var t=0;t<_this.tabButtons.length;t+=1){_this.tabButtons[t].addEventListener("click",_this.onTabButtonClick.bind(_this))}_this.notificationItems=_this.panel.querySelectorAll(".cleverpush-panel-notification");for(var n=0;n<_this.notificationItems.length;n+=1){_this.notificationItems[n].addEventListener("click",_this.openNotification.bind(_this))}};if("notifications"===this.tab)content+='<div class="cleverpush-panel-spinner"><div class="spinner">\n                <div class="double-bounce1"></div>\n                <div class="double-bounce2"></div>\n            </div></div>',setPanelContent(content),this.subscriptionManager.getStoredNotifications().then((function(e){e.length?(content+='<div class="cleverpush-panel-notifications" style="display: none;">',e.slice(0,50).forEach((function(e){e.testVariants&&e.testVariants.length&&e.testVariants[0]&&(!e.title&&e.testVariants[0].title&&(e.title=e.testVariants[0].title),!e.text&&e.testVariants[0].text&&(e.text=e.testVariants[0].text),e.testVariants[0].url&&(e.url=e.testVariants[0].url)),content+='<div class="cleverpush-panel-notification" data-url="'.concat(e.url,'" data-id="').concat(e._id,'">'),content+='<div class="cleverpush-panel-notification-image" style="background-image: url(\''.concat(e.mediaUrl||e.iconUrl||_this.config.channelIcon,"');\"></div>"),content+='<div class="cleverpush-panel-notification-title">'.concat(e.title,"</div>"),e.text&&(e.text.length>100&&(e.text=e.text.substr(0,100)+"…"),content+='<div class="cleverpush-panel-notification-text">'.concat(e.text,"</div>")),e.createdAt&&(content+='<div class="cleverpush-panel-notification-time">'.concat(_this.timeString(new Date(e.queuedAt||e.scheduledAt||e.createdAt)),"</div>")),content+="</div>"})),content+="</div>"):content+='<div class="cleverpush-panel-notifications-empty">'.concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.notificationsEmpty"),"</div>"),setPanelContent(content);var t=panelContent.querySelector(".cleverpush-panel-spinner"),n=panelContent.querySelector(e.length?".cleverpush-panel-notifications":".cleverpush-panel-notifications-empty");t&&n&&Object(_utils_dom__WEBPACK_IMPORTED_MODULE_2__.e)(t,150,(function(){t.style.display="none",n.style.opacity=0,n.style.display="block",Object(_utils_dom__WEBPACK_IMPORTED_MODULE_2__.d)(n,150)}))}));else if("settings"===this.tab){var topicsContent,setSettingsContent=function setSettingsContent(){if(content+='<div class="cleverpush-panel-settings">'.concat(topicsContent||"",'<div class="cleverpush-panel-unsubscribe">')+'<button type="button" class="cleverpush-panel-unsubscribe-button">'+Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("unsubscribe.title")+"</button></div></div>",setPanelContent(content),_this.unsubscribeButton=_this.panel.querySelector(".cleverpush-panel-unsubscribe-button"),_this.unsubscribeButton&&_this.unsubscribeButton.addEventListener("click",_this.onUnsubscribeClick.bind(_this)),topicsContent){if(_this.config.topicsTemplateFunction&&topicsContent){var topicsDiv=panelContent.querySelector(".cleverpush-topics");if(topicsDiv)try{var templateFunc=eval("("+_this.config.topicsTemplateFunction+")");"function"==typeof templateFunc&&_this.subscriptionManager.getTopics().then((function(e){templateFunc(topicsDiv,_this.config,e,"panel"),_this.topicCheckboxes=_this.panel.querySelectorAll('.cleverpush-panel-topics input[type="'+(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]')}))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_4__.a.error(e)}}else _this.topicCheckboxes=_this.panel.querySelectorAll('.cleverpush-panel-topic-selection input[type="'+(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]');_this.saveTopicsButton=_this.panel.querySelector(".cleverpush-panel-save-topics-button"),_this.saveTopicsButton&&_this.saveTopicsButton.addEventListener("click",_this.saveTopics.bind(_this))}};this.config.channelTopics&&this.config.channelTopics.length?this.config.topicsTemplateFunction?(topicsContent="<div><h3>".concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.editTopics"),'</h3><div class="cleverpush-topics cleverpush-panel-topics"></div><div class="cleverpush-panel-save-topics"><button type="button" class="cleverpush-panel-save-topics-button">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.save"),"</div></button>"),setSettingsContent()):this.subscriptionManager.getTopics().then((function(e){var t=_this.config.channelTopics.filter((function(e){return!e.parentTopic}));topicsContent="".concat('<div class="cleverpush-topics cleverpush-panel-topics"><h3>'+Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.editTopics")+'</h3><div class="cleverpush-panel-topic-selection">').concat(t.sort((function(e,t){return e.sort-t.sort})).map((function(t){var n=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.a)(t.name),i=_this.config.channelTopics.filter((function(e){return e.parentTopic===t._id})),r='<div class="cleverpush-panel-topic '.concat(i.length?"topic-has-children":"",'"><label><input type="').concat(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" name="topics[]" value="').concat(t._id,'"').concat(e&&e.indexOf(t._id)>-1?' checked="checked"':"","> ").concat(n,"</label></div>");return i.length&&i.forEach((function(n){var i=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.a)(n.name),o=_this.config.confirmAlertRadioButtonTopics||t.childTopicsRadioButtons?"radio":"checkbox";r+='<div class="topic-child" data-parent-topic="'.concat(t._id,'" style="margin-left: 20px; font-size: 90%; ').concat("",'"><label><input type="').concat(o,'" name="topics[]" value="').concat(n._id,'" ').concat(e&&e.indexOf(n._id)>-1?' checked="checked"':"","> ").concat(i,"</label></div>")})),r})).join(""),'</div><button type="button" class="cleverpush-panel-save-topics-button">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.save"),"</button>")+"</div>",setSettingsContent()})):setSettingsContent()}}},{key:"getBrandingLinks",value:function(){var e=[];return this.config.hideBranding||("convertpush.io"===this.config.cleverpushDomain?e.push('<a href="https://convertpush.io/" target="_blank" style="'.concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">Powered by ConvertPush</a>')):e.push('<a href="https://cleverpush.com/" target="_blank" style="'.concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">Powered by CleverPush</a>'))),this.config.privacyPolicyUrl&&e.push('<a href="'.concat(this.config.privacyPolicyUrl,'" target="_blank" style="').concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">').concat(this.config.privacyPolicyText||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("privacy"),"</a>")),this.config.faqText&&this.config.faqUrl&&e.push('<a href="'.concat(this.config.faqUrl,'" target="_blank" style="').concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">').concat(this.config.faqText||"FAQ","</a>")),e.join(" &nbsp;/&nbsp; ")}},{key:"saveTopics",value:function(e){var t=this;if(e.preventDefault(),!this.savingTopics){this.savingTopics=!0,this.saveTopicsButton.innerHTML+="...",this.saveTopicsButton.disabled=!0;var n=[];if(this.topicCheckboxes=this.panel.querySelectorAll('.cleverpush-panel-topics input[type="'+(this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]'),this.topicCheckboxes&&this.topicCheckboxes.length)for(var i=0;i<this.topicCheckboxes.length;i+=1){var r=this.topicCheckboxes[i];r.checked&&n.push(r.value)}var o=function(e){t.saveTopicsButton.disabled=!1,e?(t.saveTopicsButton.innerHTML="<span>".concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.successfullySaved"),"</span>"),setTimeout((function(){t.saveTopicsButton.innerHTML=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.save"),t.savingTopics=!1}),2e3)):(t.saveTopicsButton.innerHTML=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.save"),t.savingTopics=!1)};this.subscriptionManager.setTopics(n).then((function(){t.subscriptionManager.sync().then((function(){o(!0)})).catch((function(){o(!1)}))})).catch((function(){o(!1)}))}}}]),Panel}()},function(e,t,n){e.exports=n(33)},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var i=n(19);function r(t,n,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?e.exports=r=function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}:e.exports=r=Reflect.construct,r.apply(null,arguments)}e.exports=r},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(31),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(21))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,o,s,a,c=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},i=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(r=d.documentElement,i=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(p,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(s+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[c]=r,i(c),c++},f.clearImmediate=h}function h(e){delete u[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(21),n(32))},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function b(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var i=n(11),r=n.n(i),o=n(6),s=n.n(o),a=n(8),c=n.n(a),u=n(9),l=n.n(u),d=n(4),f=n.n(d),h=n(10),p=n.n(h),b=n(18),g=n.n(b),v=n(0),m=n(15),w=n.n(m),y=n(14),S=n(1);function _(e){return new Promise((function(t){return e.json().then((function(n){return t({status:e.status,ok:e.ok,json:n})})).catch((function(){return t({status:e.status,ok:e.ok,json:null})}))}))}function k(e,t){return new Promise((function(n,i){(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("request timeout"))}),n)}))])})(e,t,t.timeout||1e4).then(_).then((function(e){return e.ok?n(e.json):i(new S.a(e.json?e.json.error:"HTTP Error",e.status))})).catch((function(e){return i(e)}))}))}var I=function(){function e(t){s()(this,e),this.channelId=t,this.confirmAlertTestId=void 0,this.endpoint="https://api.cleverpush.com",this.regionEnabled=!1}return c()(e,[{key:"setConfirmAlertTestId",value:function(e){this.confirmAlertTestId=e}},{key:"request",value:function(e,t,n){Object(v.b)("request",e,t,n);var i={method:"GET",headers:{Accept:"application/json"}};return e&&(i.method=e),n&&(i.body=JSON.stringify(Object.assign({sdkVersion:"0.6.1"},n)),i.headers["Content-Type"]="application/json"),k(this.endpoint+t,i)}},{key:"getChannelConfig",value:function(e){var t="/channel/".concat(this.channelId,"/config");if(void 0!==e&&e){t+="?confirmAlertTestsEnabled=true";var n=new w.a(navigator.userAgent).getOS();n.name&&(t+="&platformName="+n.name)}return this.request("GET",t,null)}},{key:"tagSubscription",value:function(e,t){return this.request("POST","/subscription/tag",{channelId:this.channelId,tagId:t,subscriptionId:e})}},{key:"untagSubscription",value:function(e,t){return this.request("POST","/subscription/untag",{channelId:this.channelId,tagId:t,subscriptionId:e})}},{key:"setSubscriptionAttribute",value:function(e,t,n){return this.request("POST","/subscription/attribute",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"pushSubscriptionAttributeValue",value:function(e,t,n){return this.request("POST","/subscription/attribute/push-value",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"pullSubscriptionAttributeValue",value:function(e,t,n){return this.request("POST","/subscription/attribute/pull-value",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"triggerFollowUpEvent",value:function(e,t,n,i,r,o,s){var a={channelId:this.channelId,subscriptionId:e,campaignId:t,notificationId:n,name:i,parameters:r,fromNotification:o,bypassInactive:s};if("articleBounce"===i&&"function"==typeof navigator.sendBeacon){var c=new Blob([JSON.stringify(a)],{type:"application/x-www-form-urlencoded"});return navigator.sendBeacon(this.endpoint+"/subscription/event",c)}return this.request("POST","/subscription/event",a)}},{key:"trackConversion",value:function(e,t,n,i,r){return this.request("POST","/subscription/conversion",{channelId:this.channelId,subscriptionId:e,notificationId:t,eventId:n,amount:i,followUpCampaignId:r})}},{key:"trackWidget",value:function(e,t){return this.request("POST","/channel/"+this.channelId+"/widget/"+t,{channelId:this.channelId,widgetId:e})}},{key:"trackPanel",value:function(e,t){return this.request("POST","/channel/"+this.channelId+"/panel/"+t,{channelId:this.channelId,notificationId:e})}},{key:"trackBounce",value:function(e){var t=Object.assign({channelId:this.channelId},e||{}),n=new w.a(navigator.userAgent),i=n.getBrowser(),r=n.getOS();if(t.platformName=r.name||void 0,t.browserType=i.name||void 0,"function"==typeof navigator.sendBeacon){var o=new Blob([JSON.stringify(t)],{type:"application/x-www-form-urlencoded"});return navigator.sendBeacon(this.endpoint+"/notification/bounced",o)}return this.request("POST","/notification/bounced",t)}},{key:"getSyncParameters",value:function(e){Object(v.b)("getSyncParameters");var t=new w.a(navigator.userAgent),n=t.getBrowser(),i=t.getOS(),r={channelId:this.channelId,browserType:n.name||void 0,browserVersion:n.version||void 0,platformName:i.name||void 0,platformVersion:i.version||void 0},o=location.pathname;o&&(r.pathname=o);try{if("undefined"!=typeof sessionStorage){var s=sessionStorage.getItem("cleverpush-referrer")||document.referrer.split("?")[0];s&&(r.referrer=s);var a=sessionStorage.getItem("cleverpush-referral-subscription-id");a&&(r.referralSubscriptionId=a)}}catch(e){}if("undefined"!=typeof localStorage){var c=localStorage.getItem("cleverpush-visits")||0;isNaN(c)||(r.visits=c+""),"was-denied"!==localStorage.getItem("subscription-status")&&"denied"!==localStorage.getItem("subscription-status")||(r.wasDenied=!0)}var u=(navigator.language||navigator.userLanguage||"").substr(0,2);return u&&(r.language=u),this.confirmAlertTestId&&(r.confirmAlertTestId=this.confirmAlertTestId),this.testSubscription&&(r.testSubscription=this.testSubscription),void 0!==e&&e?r:new y.a((function(e){k("https://geoip-api.cleverpush.com/",{mode:"cors",timeout:3e3}).then((function(t){e(Object.assign(r,t))})).catch((function(t){v.a.error(t),e(r)}))}))}},{key:"syncSubscription",value:function(e,t,n,i){var o=this;if(Object(v.b)("syncSubscription",e,t),!e)return y.a.reject();var s="object"===r()(i)?i:{};return this.getSyncParameters().then((function(i){s=Object.assign(s,i);var a=parseInt(s.browserVersion.split(".")[0],10);if(o.regionEnabled||delete s.region,"object"===r()(t)&&t&&!isNaN(t.length)){var c=0;try{var u=localStorage.getItem("cleverpush-topics-version");u&&!isNaN(u)&&(c=parseInt(u,10))}catch(e){}c+=1,s.topics=t,s.topicsVersion=c}if("object"===r()(n)&&n&&n.length&&(s.tags=n),s.existingPermission&&delete s.confirmAlertTestId,o.fromBellWidget&&(s.fromBellWidget=o.fromBellWidget),o.widgetId&&(s.widgetId=o.widgetId),e.facebookUserRef&&(s.facebookUserRef=e.facebookUserRef,"undefined"!=typeof self&&self.CleverPush&&self.CleverPush.config&&self.CleverPush.config.multiChannels&&self.CleverPush.config.multiChannels.facebookChannel._id!==s.channelId&&(s.channelId=self.CleverPush.config.multiChannels.facebookChannel._id)),"Safari"===s.browserType&&"object"===r()(e)&&e.deviceToken)s.apnsToken=e.deviceToken;else if("string"==typeof e)s.subscriptionId=e;else if("Chrome"===s.browserType&&a>=42&&a<50)s.endpoint=e.endpoint;else if(s.endpoint=e.endpoint,void 0!==e.getKey){var l=e.getKey?e.getKey("p256dh"):null,d=null;("Firefox"!==s.browserType||"Firefox"===s.browserType&&a>=46)&&(d=e.getKey?e.getKey("auth"):null),l&&(s.publicKey=btoa(String.fromCharCode.apply(null,new Uint8Array(l)))),d&&(s.authSecret=btoa(String.fromCharCode.apply(null,new Uint8Array(d))))}return new y.a((function(e,t){return o.request("POST","/subscription/sync/".concat(o.channelId),s).then((function(n){n&&n.id?e(n):n&&n.error?t(n.error):t()})).catch((function(e){e.reason?t(e.reason):e.status?t(e.status):t(e)}))}))}))}},{key:"unsubscribe",value:function(e){var t=this;return new y.a((function(n){t.request("POST","/subscription/unsubscribe",{subscriptionId:e,channelId:t.channelId}).then(n).catch(n)}))}},{key:"unsubscribeFeedback",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new y.a((function(i){t.request("POST","/subscription/unsubscribe/feedback",{type:e,text:n,channelId:t.channelId}).then(i).catch(i)}))}},{key:"startSession",value:function(e,t){var n=this;return new y.a((function(i){n.request("POST","/subscription/session/start",Object.assign({},{subscriptionId:e,channelId:n.channelId},t||{})).then(i).catch(i)}))}},{key:"endSession",value:function(e,t){var n=new Blob([JSON.stringify(Object.assign({subscriptionId:e,channelId:this.channelId},t))],{type:"application/x-www-form-urlencoded"});return navigator.sendBeacon(this.endpoint+"/subscription/session/end",n)}},{key:"confirmAlertShown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirm-alert",n=!0,i="cleverpush-"+t+"-reported",r=2,o=sessionStorage.getItem(i);if(o){var s=parseInt(o,10);isNaN(s)||(n=s+36e5*r<Date.now())}if(n){sessionStorage.setItem(i,Date.now());var a={channelId:this.channelId,confirmAlertTestId:this.confirmAlertTestId},c=new w.a(navigator.userAgent),u=c.getBrowser(),l=c.getOS();if(a.platformName=l.name||void 0,a.browserType=u.name||void 0,void 0!==e&&e&&(a.existingPermission=!0,delete a.confirmAlertTestId),"undefined"!=typeof window&&window.CleverPush&&window.CleverPush.config.trackOptInPathnames){var d=location.pathname;d&&(a.pathname=d)}if(this.widgetId&&(a.widgetId=this.widgetId),"undefined"!=typeof window&&window.CleverPush&&window.CleverPush.config.trackOptInReferrers)try{if("undefined"!=typeof sessionStorage){var f=sessionStorage.getItem("cleverpush-referrer")||document.referrer.split("?")[0];f&&(a.referrer=f)}}catch(e){}return"undefined"==typeof localStorage||"was-denied"!==localStorage.getItem("subscription-status")&&"denied"!==localStorage.getItem("subscription-status")||(a.wasDenied=!0),this.request("POST","/channel/"+t,a)}return y.a.resolve()}},{key:"trackOptInVisitor",value:function(){var e={channelId:this.channelId,confirmAlertTestId:this.confirmAlertTestId};return this.widgetId&&(e.widgetId=this.widgetId),this.request("POST","/channel/optin-visitor",e)}},{key:"confirmAlertDenied",value:function(){var e={channelId:this.channelId,confirmAlertTestId:this.confirmAlertTestId};return this.widgetId&&(e.widgetId=this.widgetId),e.existingPermission&&delete e.confirmAlertTestId,this.request("POST","/channel/blocked-optin-request",e)}},{key:"generateWalletPass",value:function(e,t){var n=this;return new y.a((function(i,r){n.request("POST","/channel/"+n.channelId+"/wallet-pass/"+e+"/subscribe",Object.assign({},{walletPassId:e},t)).then(i).catch(r)}))}}]),e}(),E=n(7),T=n(3);var P=function(){function e(t){s()(this,e),this.config=t;try{if("localStorage"in window&&(t.cleverpushDomain&&(t.cleverpushDomain&&localStorage.getItem("cleverpush-subscription-id")&&!localStorage.getItem("cleverpush-domain")&&localStorage.setItem("cleverpush-domain","cleverpush.com"),localStorage.getItem("cleverpush-domain")&&(this.config.cleverpushDomain=localStorage.getItem("cleverpush-domain"))),localStorage.getItem("push-subscription-status")&&!localStorage.getItem("cleverpush-subscription-status")&&localStorage.setItem("cleverpush-subscription-status",localStorage.getItem("push-subscription-status")),localStorage.getItem("push-subscription-id")&&!localStorage.getItem("cleverpush-subscription-id")&&localStorage.setItem("cleverpush-subscription-id",localStorage.getItem("push-subscription-id")),"allowed"!==localStorage.getItem("cleverpush-subscription-status")&&"unsubscribed"!==localStorage.getItem("cleverpush-subscription-status"))){var n=Date.now();void 0===this.config.alertHoursDeny&&(this.config.alertHoursDeny=8760);var i=!1,r=!1;if(localStorage.getItem("cleverpush-deny-time")&&this.config.alertHoursDeny>0){var o=parseInt(localStorage.getItem("cleverpush-deny-time"),10),a=parseInt(this.config.alertHoursDeny,10);isNaN(o)||isNaN(a)||o+60*a*60*1e3<n&&(i=!0)}if(localStorage.getItem("cleverpush-deny-sessions")&&this.config.alertSessionsDeny>0){var c=parseInt(localStorage.getItem("cleverpush-deny-sessions"),10);isNaN(c)||(sessionStorage.getItem("cleverpush-deny-session-counted")||(c+=1,localStorage.setItem("cleverpush-deny-sessions",c)),c>=this.config.alertSessionsDeny&&(r=!0))}!i&&!r||this.config.alertHoursDeny&&!i||this.config.alertSessionsDeny&&!r||(localStorage.removeItem("push-subscription-status"),localStorage.removeItem("cleverpush-deny-time"),localStorage.removeItem("cleverpush-deny-sessions"),"denied"===localStorage.getItem("cleverpush-subscription-status")?localStorage.setItem("cleverpush-subscription-status","was-denied"):localStorage.removeItem("cleverpush-subscription-status"));var u=!1,l=!1;if(localStorage.getItem("cleverpush-close-time")&&this.config.alertHoursClose>0){var d=parseInt(localStorage.getItem("cleverpush-close-time"),10),f=parseInt(this.config.alertHoursClose,10);isNaN(d)||isNaN(f)||d+60*f*60*1e3<n&&(u=!0)}if(localStorage.getItem("cleverpush-close-sessions")&&this.config.alertSessionsClose>0){var h=parseInt(localStorage.getItem("cleverpush-close-sessions"),10);isNaN(h)||(sessionStorage.getItem("cleverpush-close-session-counted")||(h+=1,localStorage.setItem("cleverpush-close-sessions",h)),h>=this.config.alertSessionsClose&&(l=!0))}!u&&!l||this.config.alertHoursClose&&!u||this.config.alertSessionsClose&&!l||(localStorage.removeItem("push-subscription-status"),localStorage.removeItem("cleverpush-subscription-status"),localStorage.removeItem("cleverpush-close-time"),localStorage.removeItem("cleverpush-close-sessions"))}}catch(e){}}return c()(e,[{key:"dbOpenError",value:function(e){var t=this;e.message&&e.message.toString().indexOf("VersionError")>-1?(v.a.info("deleting db"),window.indexedDB.deleteDatabase("cleverpush").onsuccess=function(){var e=t.db.open();e.onsuccess=function(){return t.dbOpenSuccess(e)},e.onerror=function(e){v.a.warn(e)}}):e.name&&"NoSuchDatabaseError"===e.name||v.a.warn(e)}},{key:"dbOpenSuccess",value:function(e){var t=this;this.db=e.result,this.db.onerror=function(e){v.a.warn("IndexedDB error occured",e)},this.db.onversionchange=function(e){if(null===e.newVersion)e.target.close();else{t.db.close();var n=window.indexedDB.open("cleverpush",40);n.onsuccess=function(){return t.dbOpenSuccess(n)},n.onerror=t.dbOpenError}}}},{key:"initDb",value:function(){var e=this;if(!this.db&&window.indexedDB)try{var t=window.indexedDB.open("cleverpush",40);t.onsuccess=function(){return e.dbOpenSuccess(t)},t.onerror=this.dbOpenError,t.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore("notifications",{keyPath:"id"});n.createIndex("id","id",{unique:!0}),n.createIndex("url","url",{unique:!1}),n.createIndex("clicked","clicked",{unique:!1}),n.createIndex("title","title",{unique:!1}),n.createIndex("text","text",{unique:!1}),n.createIndex("icon","icon",{unique:!1}),n.createIndex("subscriptionId","subscriptionId",{unique:!1}),n.createIndex("channelId","channelId",{unique:!1}),n.createIndex("autoHide","autoHide",{unique:!1}),n.createIndex("markedAsDelivered","markedAsDelivered",{unique:!1}),n.createIndex("markedAsClicked","markedAsClicked",{unique:!1}),n.createIndex("clickedAction","clickedAction",{unique:!1}),n.createIndex("deliveredAt","deliveredAt",{unique:!1});var i=t.createObjectStore("subscription",{keyPath:"id"});i.createIndex("id","id",{unique:!0}),i.createIndex("channelId","channelId",{unique:!1})}}catch(e){v.a.info("initDb err",e)}}},{key:"getNotifications",value:function(e){var t=this;return new Promise((function(n){var i=[];if(t.db){var r=t.db.transaction(["notifications"],"readonly").objectStore("notifications").index("deliveredAt"),o=(IDBKeyRange.lowerBound(0),r.openCursor(null,"prev"));o.onsuccess=function(t){var r=t.target.result;!1==!!r||i.length>=(e||50)?n(i):(i.push(r.value),r.continue())},o.onerror=function(){return n(i)}}else n(i)}))}},{key:"getNotification",value:function(e){var t=this;return new Promise((function(n){if(t.db){var i=t.db.transaction(["notifications"]).objectStore("notifications").get(e);i.onsuccess=function(e){var t=e.target.result;n(t)},i.onerror=function(){return n(null)}}else n(null)}))}},{key:"addNotification",value:function(e){var t=this;return new Promise((function(n,i){if(t.db){var r=t.db.transaction(["notifications"],"readwrite").objectStore("notifications").put(e);r.onsuccess=n,r.onerror=i}else n(null)}))}},{key:"deleteNotification",value:function(e){var t=this;return new Promise((function(n,i){if(t.db){var r=t.db.transaction(["notifications"],"readwrite").objectStore("notifications").delete(e);r.onsuccess=n,r.onerror=i}else n(null)}))}},{key:"canSubscribe",value:function(){try{return new Promise((function(e){try{var t=localStorage.getItem("cleverpush-subscription-status"),n=sessionStorage.getItem("cleverpush-subscription-status");e("denied"!==t&&"unsubscribed"!==t&&"pending"!==t&&"denied"!==n)}catch(t){e(!0)}}))}catch(e){return Promise.resolve(!0)}}},{key:"isSubscribed",value:function(e,t,n){var i=this;try{if(void 0!==t&&t){var r=localStorage.getItem("cleverpush-subscription-status");return!(!r||"denied"===r||"unsubscribed"===r||"pending"===r)&&(!!e||!!this.getSubscriptionId())}return new Promise((function(t){try{var r=localStorage.getItem("cleverpush-subscription-status");if(r&&"denied"!==r&&"unsubscribed"!==r&&"pending"!==r){var o="granted"===localStorage.getItem("amp-web-push-notification-permission");t(!(!e&&!o)||!!i.getSubscriptionId())}else t(!(void 0===n||!n)&&!!i.getSubscriptionId())}catch(e){t(!1)}}))}catch(e){return Promise.resolve(!0)}}},{key:"getSubscriptionId",value:function(){var e;try{(e=localStorage.getItem("cleverpush-subscription-id"))||(e=sessionStorage.getItem("cleverpush-subscription-id"))}catch(e){}if(!e&&Object(E.g)()){var t=new URLSearchParams(location.search.slice(1));t&&(e=t.get("subscriptionId"))}return e}},{key:"setClickedNotification",value:function(e){try{localStorage.setItem("cleverpush-notification-clicked",JSON.stringify({id:e,date:Date.now()}))}catch(e){}}},{key:"getClickedNotification",value:function(){try{var e=localStorage.getItem("cleverpush-notification-clicked"),t=JSON.parse(e);if(t&&t.id&&t.date&&parseInt(t.date,10)+36e5>Date.now())return t.id}catch(e){}return null}},{key:"getLastSession",value:function(){var e;try{e=localStorage.getItem("cleverpush-last-session")}catch(e){}var t={};if(e)try{t=JSON.parse(e)}catch(e){}return t}},{key:"setLastSession",value:function(e){try{localStorage.setItem("cleverpush-last-session",JSON.stringify(e))}catch(e){}}},{key:"setSubscribed",value:function(e,t){var n=this;if(e&&(localStorage.setItem("cleverpush-subscription-id",e),localStorage.setItem("cleverpush-domain",this.config.cleverpushDomain||"cleverpush.com"),void 0!==t&&t||localStorage.setItem("cleverpush-subscription-status","allowed"),this.db))try{this.db.transaction(["subscription"],"readwrite").objectStore("subscription").clear().onsuccess=function(){n.db.transaction(["subscription"],"readwrite").objectStore("subscription").put({id:e,channelId:n.config.channelId})}}catch(e){v.a.info("setSubscribed db error",e)}}},{key:"getFacebookUserRef",value:function(){try{return localStorage.getItem("cleverpush-facebook-user-ref")}catch(e){}}},{key:"setFacebookUserRef",value:function(e){e&&localStorage.setItem("cleverpush-facebook-user-ref",e)}},{key:"setAllowed",value:function(){localStorage.setItem("cleverpush-subscription-status","allowed")}},{key:"setPending",value:function(){localStorage.setItem("cleverpush-subscription-status","pending")}},{key:"setDenied",value:function(){localStorage.setItem("cleverpush-deny-time",Date.now()),localStorage.setItem("cleverpush-subscription-status","denied"),this.config.alertSessionsDeny>0&&(localStorage.setItem("cleverpush-deny-sessions","0"),sessionStorage.setItem("cleverpush-deny-session-counted","true"))}},{key:"setClosed",value:function(){localStorage.setItem("cleverpush-close-time",Date.now()),this.config.alertHoursClose>0||this.config.alertSessionsClose>0?localStorage.setItem("cleverpush-subscription-status","denied"):localStorage.removeItem("cleverpush-subscription-status"),this.config.alertSessionsClose>0&&(localStorage.setItem("cleverpush-close-sessions","0"),sessionStorage.setItem("cleverpush-close-session-counted","true"))}},{key:"setUnsubscribed",value:function(e){if(localStorage.removeItem("push-subscription-id"),localStorage.removeItem("cleverpush-subscription-id"),localStorage.removeItem("cleverpush-last-sync"),localStorage.removeItem("cleverpush-last-session"),localStorage.removeItem("cleverpush-last-worker-update"),localStorage.removeItem("cleverpush-last-worker-version"),localStorage.removeItem("cleverpush-domain"),localStorage.removeItem("cleverpush-facebook-user-ref"),localStorage.removeItem("cleverpush-topics"),localStorage.removeItem("cleverpush-topics-version"),localStorage.removeItem("cleverpush-tags"),localStorage.removeItem("cleverpush-attributes"),localStorage.removeItem("cleverpush-visits"),e||(localStorage.setItem("cleverpush-subscription-status","unsubscribed"),localStorage.setItem("cleverpush-deny-time",Date.now())),Object.keys(localStorage).forEach((function(e){(e&&e.startsWith("cleverpush-tag")||e.startsWith("cleverpush-attribute"))&&localStorage.removeItem(e)})),this.db)try{this.db.transaction(["subscription"],"readwrite").objectStore("subscription").clear()}catch(e){v.a.info("setUnsubscribed db error",e)}}},{key:"checkIfShouldSync",value:function(){var e=this;return new Promise((function(t){try{var n=localStorage.getItem("cleverpush-last-sync");if(e.getSubscriptionId())if(n){var i=parseInt(n,10);isNaN(i)?t(!0):t(i+1728e5<=Date.now())}else t(!0);else t(!0)}catch(e){t(!0)}}))}},{key:"setSynced",value:function(){localStorage.setItem("cleverpush-last-sync",Date.now())}},{key:"checkIfShouldUpdateWorker",value:function(){return new Promise((function(e){try{var t=localStorage.getItem("cleverpush-last-worker-update"),n=localStorage.getItem("cleverpush-last-worker-version");if(t)e("0.6.1"!==n);else e(!0)}catch(t){e(!0)}}))}},{key:"setWorkerUpdated",value:function(){localStorage.setItem("cleverpush-last-worker-update",Date.now()),localStorage.setItem("cleverpush-last-worker-version","0.6.1")}},{key:"getVisits",value:function(){var e;try{e=localStorage.getItem("cleverpush-visits")}catch(e){}var t=0;return e&&(t=parseInt(e,10),isNaN(t)&&(t=0)),t}},{key:"incrementVisits",value:function(){var e=this.getVisits();e+=1,localStorage.setItem("cleverpush-visits",e)}},{key:"setTopics",value:function(e){return v.a.debug("storageManager.setTopics",e),new Promise((function(t){e&&e.length?localStorage.setItem("cleverpush-topics",JSON.stringify(e)):e&&localStorage.removeItem("cleverpush-topics"),t(!0)}))}},{key:"getTopics",value:function(){var e=localStorage.getItem("cleverpush-topics");if(!e)return Promise.resolve([]);try{var t=JSON.parse(e);return Promise.resolve(t||[])}catch(e){return Promise.resolve([])}}},{key:"getTagDates",value:function(){var e={};if(localStorage.getItem("cleverpush-tag-dates"))try{e=JSON.parse(localStorage.getItem("cleverpush-tag-dates"))}catch(e){}return e}},{key:"getTagDate",value:function(e){var t=(this.getTagDates()||{})[e];return t?new Date(t):null}},{key:"setTags",value:function(e){var t=this;return new Promise((function(n){localStorage.setItem("cleverpush-tags",JSON.stringify(e));var i=t.getTagDates()||{};e.forEach((function(e){i[e]=(new Date).toISOString()})),localStorage.setItem("cleverpush-tag-dates",JSON.stringify(i)),n(!0)}))}},{key:"addTag",value:function(e){var t=this;return this.getTags().then((function(n){return n.indexOf(e)<0&&n.push(e),t.setTags(n)}))}},{key:"removeTag",value:function(e){var t=this;return this.getTags().then((function(n){var i=n.indexOf(e);return i>-1?(n.splice(i,1),t.setTags(n)):Promise.resolve()}))}},{key:"getTags",value:function(){var e=localStorage.getItem("cleverpush-tags");if(!e)return Promise.resolve([]);try{var t=JSON.parse(e);return Promise.resolve(t||[])}catch(e){return Promise.resolve([])}}},{key:"hasTag",value:function(e){return this.getTags().then((function(t){return Promise.resolve(t.indexOf(e)>-1)}))}},{key:"setTempBlocked",value:function(){sessionStorage.setItem("cleverpush-subscription-status","denied")}}]),e}(),O=n(2),C=function(){function e(t,n,i){var r=this;s()(this,e),this.config=t,this.api=n,this.triggerEvent=i,this.storageManager=new P(t),this.subscribed=!1,this.initialTags=[];try{this.getTopics().then((function(e){return r.topics=e}))}catch(e){}}return c()(e,[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){return"PREVIEW"===e.config.env?t(!1):"granted"===window.Notification.permission&&navigator.serviceWorker?e.getActiveWorkerRegistration().then((function(n){return n.pushManager.getSubscription().then((function(n){if(n)return e.storageManager.isSubscribed().then((function(n){v.a.debug("manager subscribed = "+n+" (2)"),e.subscribed=n,t(n)}));v.a.debug("manager subscribed = false (1)"),e.subscribed=!1,t(!1)}))})).catch((function(n){n&&v.a.error(n),v.a.debug("manager subscribed = false (3)"),e.subscribed=!1,t(!1)})):(v.a.debug("manager subscribed = false (4)"),e.subscribed=!1,void t(!1))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){e.storageManager.canSubscribe().then((function(i){i?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):"denied"===Notification.permission?n(new S.a("User denied notifications","denied")):t(!0)})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))})).catch((function(e){n(e)}))}))}},{key:"subscribe",value:function(){}},{key:"subscribeForce",value:function(){this.subscribe()}},{key:"showUnsubscribeFeedback",value:function(){var e=this;if(!this.config.unsubscribeFeedbackDisabled){var t=[];this.config.optOutFeedbackAnswers&&this.config.optOutFeedbackAnswers.length?(this.config.optOutFeedbackAnswers.forEach((function(e){return t.push({title:e.title,id:e.id,icon:e.icon})})),this.config.optOutFeedbackCustomText&&t.push({title:Object(O.b)("unsubscribe.reasonOther"),id:"other",icon:""})):t.push({title:Object(O.b)("unsubscribe.reasonQuantity"),id:"quantity",icon:""},{title:Object(O.b)("unsubscribe.reasonContent"),id:"content",icon:""},{title:Object(O.b)("unsubscribe.reasonOther"),id:"other",icon:""});var n=document.createElement("div");n.className="cleverpush-confirm cleverpush-confirm-default cleverpush-uf-box",n.innerHTML='\n    <div class="cleverpush-confirm-text">\n    <span class="cleverpush-confirm-title">'.concat(Object(O.b)("unsubscribe.feedback"),'</span>\n    </div>\n    <div style="margin-top: 10px; margin-bottom: 5px; padding-top: 10px;">\n    ').concat(t.map((function(e){return'<button type="button" class="cleverpush-confirm-btn cleverpush-uf-button" style="text-transform: none; margin-bottom: 10px !important;" data-reason="'.concat(e.id,'">').concat(e.icon?"<img src=".concat(e.icon,' style="margin-right: 10px; float: left;" width="25" heigh="25">'):"").concat(e.title,"</button>")})).join(""),"\n    </div>\n    "),document.body.appendChild(n);for(var i=n.querySelectorAll(".cleverpush-confirm-btn"),r=0;r<i.length;r++){i[r].addEventListener("click",(function(t){t.preventDefault(),"other"===t.currentTarget.dataset.reason&&e.config.optOutFeedbackCustomText?e.showCustomText(n):(e.api.unsubscribeFeedback(t.currentTarget.dataset.reason),n.parentNode.removeChild(n))}))}}}},{key:"showCustomText",value:function(e){var t=this;e.innerHTML='\n    <div class="cleverpush-confirm-text">\n    <span class="cleverpush-confirm-title">'.concat(Object(O.b)("unsubscribe.enterReason"),'</span>\n    </div>\n    <div style="margin-top: 10px; margin-bottom: 5px;">\n      <div style="text-align: center; padding: 12px;">\n        <textarea style="width: 100%; margin-bottom: 10px;"></textarea>\n        <button type="button" class="cleverpush-confirm-btn cleverpush-uf-button" style="text-transform: none;, margin-bottom: 10px !important;" data-reason="other">').concat(Object(O.b)("unsubscribe.submit"),"</button>\n      </div>\n    </div>\n    "),e.querySelector(".cleverpush-confirm-btn").addEventListener("click",(function(n){n.preventDefault();var i=e.querySelector("textarea").value;t.api.unsubscribeFeedback(n.currentTarget.dataset.reason,i),e.parentNode.removeChild(e)}))}},{key:"unsubscribe",value:function(e,t){var n=this,i=function(){return n.storageManager.setUnsubscribed(e),n.topics=[],n.triggerEvent(T.a.UNSUBSCRIBED),navigator.serviceWorker?n.getActiveWorkerRegistration().then((function(e){return e.pushManager})).then((function(e){return e.getSubscription()})).then((function(e){if(e)return e.unsubscribe().then((function(){return Promise.resolve()}))})):Promise.resolve()},r=this.storageManager.getSubscriptionId();return!r||void 0!==t&&t===r?i().then((function(){return n.showUnsubscribeFeedback(),Promise.resolve()})):this.api.unsubscribe(r).then((function(){return i().then((function(){return n.showUnsubscribeFeedback(),Promise.resolve()}))}))}},{key:"getWorkerPath",value:function(){return Object(E.f)()?"/cleverpush-worker.js":this.config.serviceWorkerFile||"/worker.js"}},{key:"getWorkerScope",value:function(){var e=this.getWorkerPath();return e.indexOf("?")>-1&&(e=e.split("?")[0]),e.substr(0,e.lastIndexOf("/")+1)||"/"}},{key:"getServiceWorker",value:function(e){return e.active||e.waiting||e.installing}},{key:"getActiveWorkerRegistration",value:function(){var e=this;return new Promise((function(t,n){if(navigator.serviceWorker)if(navigator.serviceWorker.getRegistration){var i=e.getWorkerScope(),r=e.config.serviceWorkerFile;navigator.serviceWorker.getRegistration(i).then((function(i){i&&e.getServiceWorker(i)&&(!r||!e.getServiceWorker(i).scriptURL||e.getServiceWorker(i).scriptURL.indexOf(r)>-1)?t(i):"function"==typeof navigator.serviceWorker.getRegistrations?navigator.serviceWorker.getRegistrations().then((function(i){var o=!1;(i||[]).forEach((function(n){o||(n&&e.getServiceWorker(n)&&(!r||!e.getServiceWorker(n).scriptURL||e.getServiceWorker(n).scriptURL.indexOf(r)>-1)?(o=!0,t(n)):v.a.debug("worker: getActiveWorkerRegistration:",n,e.getServiceWorker(n)))})),o||(v.a.debug("worker: getActiveWorkerRegistration: !found"),n())})).catch(n):navigator.serviceWorker.controller?(v.a.debug("worker: getActiveWorkerRegistration: waiting for worker to be ready"),navigator.serviceWorker.ready.then(t).catch(n)):(v.a.debug("worker: getActiveWorkerRegistration: last reject 1"),n())})).catch(n)}else navigator.serviceWorker.controller?(v.a.debug("worker: getActiveWorkerRegistration: waiting for worker to be ready"),navigator.serviceWorker.ready.then(t).catch(n)):(v.a.debug("worker: getActiveWorkerRegistration: last reject 2"),n());else v.a.debug("worker: getActiveWorkerRegistration: !navigator.serviceWorker"),n()}))}},{key:"registerWorker",value:function(){var e=this;return new Promise((function(t,n){v.a.debug("registering worker");var i=function(){var i=e.getWorkerPath(),r=e.getWorkerScope();navigator.serviceWorker.register(i,{scope:r,updateViaCache:"none"}).then((function(i){v.a.debug("worker registered",i),i.active?(v.a.debug("worker is active"),t(i)):i.installing?(v.a.debug("worker is installing"),i.installing.addEventListener("statechange",(function(e){v.a.debug("worker: onstatechange",e.target.state),"activated"===e.target.state&&t(i)}))):i.waiting?(v.a.debug("worker is waiting"),i.installing.addEventListener("statechange",(function(e){v.a.debug("worker: onstatechange",e.target.state),"activated"===e.target.state&&t(i)}))):(v.a.debug("worker: getActiveWorkerRegistration"),e.getActiveWorkerRegistration().then(t).catch(n))})).catch((function(e){v.a.error("error registering worker",e),n(e)}))};e.getActiveWorkerRegistration().then((function(e){e&&e.active?(v.a.debug("worker was already registered",e),t(e)):i()})).catch(i)}))}},{key:"unregisterOtherPushSubscriptions",value:function(e){var t=this;Object(v.b)("unregisterOtherPushSubscriptions",e.scriptURL),this.config.importedSubscriptionsProvider&&"function"==typeof navigator.serviceWorker.getRegistrations&&navigator.serviceWorker.getRegistrations().then((function(n){(n||[]).forEach((function(n){t.getServiceWorker(n)&&t.getServiceWorker(n).scriptURL!==e.scriptURL&&t.getServiceWorker(n).scriptURL&&t.getServiceWorker(n).scriptURL.indexOf(t.config.serviceWorkerFile)<0&&t.getServiceWorker(n).scriptURL.indexOf("cleverpush")<0&&n.pushManager.getSubscription().then((function(e){v.a.debug("unsubscribing:",e),e&&(e.unsubscribe(),t.migratedSubscription=!0)}))}))}))}},{key:"tryWorkerUpdate",value:function(e){var t=this;Object(v.b)("tryWorkerUpdate",e),this.storageManager.checkIfShouldUpdateWorker().then((function(n){e&&n&&(v.a.debug("updating worker now"),e.update(),t.storageManager.setWorkerUpdated())})),this.unregisterOtherPushSubscriptionsCalled||(this.unregisterOtherPushSubscriptionsCalled=!0,this.unregisterOtherPushSubscriptions(e))}},{key:"sync",value:function(e,t){var n=this;Object(v.b)("sync",e);var i=void 0!==t?t:this.topics;return new Promise((function(t){if(n.syncInProgress)return v.a.debug("sync: resolved because syncInProgress was true"),void t();n.syncInProgress=!0;var r=e;n.getSubscriptionId().then((function(e){var o=function(){var o={};e&&(o.subscriptionId=e),n.existingPermission&&(o.existingPermission=!0),n.isReSubscribe&&(o.isReSubscribe=!0),n.migratedSubscription&&(o.migratedSubscription=!0),n.api.syncSubscription(r,i,n.initialTags,o).then((function(e){var i=e.id;if(n.initialTags=[],n.storageManager.setSubscribed(i),n.iframeMessenger&&n.iframeMessenger.setSubscribed(i),n.storageManager.setSynced(),(e.topics||[]).length&&(n.storageManager.setTopics(e.topics),n.triggerEvent(T.a.TOPICS_SET)),e.topicsVersion)try{localStorage.setItem("cleverpush-topics-version",e.topicsVersion+"")}catch(e){}n.config.channelTags&&n.config.channelTags.length&&!n.existingPermission&&!o.subscriptionId&&n.config.channelTags.forEach((function(e){e.autoAssignOptInPath&&new RegExp(e.autoAssignOptInPath).test(location.pathname)&&CleverPush.tagSubscription(e._id)})),n.syncInProgress=!1,t()})).catch((function(e){void 0!==e?404===e?(n.storageManager.setUnsubscribed(!0),n.iframeMessenger&&n.iframeMessenger.setUnsubscribed(!0),n.subscribe()):v.a.error(e):v.a.error("Unknown Error occured while syncing"),n.syncInProgress=!1,t()}))};void 0!==r&&r?o():(r=e)?o():(n.syncInProgress=!1,t())})).catch((function(e){n.syncInProgress=!1}))}))}},{key:"getSubscriptionId",value:function(){var e=this.storageManager.getSubscriptionId();return e?v.a.debug("subscriptionId",e):v.a.debug("subscriptionId not found"),Promise.resolve(e)}},{key:"hasNotificationPermission",value:function(){return"PREVIEW"===this.config.env?Promise.resolve(!1):Promise.resolve("granted"===window.Notification.permission)}},{key:"getNotificationPermission",value:function(e){try{if("Firefox"===E.a.name&&"denied"===sessionStorage.getItem("cleverpush-subscription-status")&&void 0===e)return"denied"}catch(e){}return window.Notification.permission}},{key:"setConfirm",value:function(e){this.confirm=e}},{key:"setTopics",value:function(e){return v.a.debug("setTopics",e),this.topics=e,this.storageManager.setTopics(e)}},{key:"getTopics",value:function(){return this.storageManager.getTopics()}},{key:"getStoredNotifications",value:function(){var e=this,t="/channel/"+this.api.channelId+"/received-notifications";return this.getTopics().then((function(n){return n&&n.length&&(t+="?"+n.map((function(e){return"topics[]="+e})).join("&")),e.api.request("GET",t).then((function(e){return new Promise((function(t){e&&e.notifications?t(e.notifications.filter((function(e){return e.createdAt})).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})).map((function(e){return Object.assign({},e,{title:e.title||(e.testVariants&&e.testVariants.length&&e.testVariants[0]?e.testVariants[0].title:""),text:e.text||(e.testVariants&&e.testVariants.length&&e.testVariants[0]?e.testVariants[0].text:""),mediaUrl:e.mediaUrl||(e.testVariants&&e.testVariants.length&&e.testVariants[0]?e.testVariants[0].mediaUrl:""),url:e.url||(e.testVariants&&e.testVariants.length&&e.testVariants[0]?e.testVariants[0].url:"")})}))):t([])}))}))}))}},{key:"deleteStoredNotification",value:function(e){var t=this;return new Promise((function(n,i){t.storageManager.db?t.storageManager.deleteNotification(e).then((function(){n()})).catch((function(e){i(e)})):n()}))}},{key:"getPushManagerSubscribeOptions",value:function(){var e={userVisibleOnly:!0};if(this.config.vapidPublicKey&&this.config.vapidPublicKey.length){var t=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}(this.config.vapidPublicKey);t&&(e.applicationServerKey=t)}return e}},{key:"setClickedNotification",value:function(e){return this.storageManager.setClickedNotification(e),Promise.resolve()}},{key:"getClickedNotification",value:function(){var e=this;return new Promise((function(t){t(e.storageManager.getClickedNotification())}))}}]),e}(),M=function(e){function t(){return s()(this,t),l()(this,f()(t).apply(this,arguments))}return p()(t,e),t}(S.a),N=function(e){function t(e,n,i){var r;return s()(this,t),(r=l()(this,f()(t).call(this,e,n,i))).storageManager.initDb(),r.triggerEvent(T.a.INITIALIZED),r}return p()(t,e),c()(t,[{key:"isSubscribed",value:function(e){var t=this;if(void 0!==e&&e){if(!this.config.safariWebsitePushId)return!1;var n=window.safari.pushNotification.permission(this.config.safariWebsitePushId),i=n.permission,r=n.deviceToken;return!("granted"!==i||!r)&&this.storageManager.isSubscribed(!1,!0)}return new Promise((function(e){if(t.config.safariWebsitePushId){var n=window.safari.pushNotification.permission(t.config.safariWebsitePushId),i=n.permission,r=n.deviceToken;if("granted"===i&&r)return t.storageManager.isSubscribed().then((function(n){n?t.storageManager.checkIfShouldSync().then((function(n){n?t.sync().then((function(){e(!0)})).catch((function(t){v.a.warn("error while syncing",t),e(!0)})):e(!0)})):e(!1)}));e(!1)}else e(!1)}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.config.safariWebsitePushId&&e.config.safariWebsitePushId.length)if(e.config.domain||e.config.channelDomain){try{window.safari.pushNotification.requestPermission("https://",e.config.safariWebsitePushId,{},null)}catch(e){"string"==typeof e&&e.indexOf("user gesture")>-1||"string"==typeof e.message&&e.message.indexOf("user gesture")>-1||n(e)}e.storageManager.canSubscribe().then((function(i){i?e.isSubscribed().then((function(i){i?n(new S.a("User is already subscribed","subscribed")):"denied"===window.safari.pushNotification.permission(e.config.safariWebsitePushId).permission?n(new S.a("User denied notifications","denied")):(e.config.isSafari_12_1&&e.api.getSyncParameters().then((function(t){e.cachedSyncParameters=t})),t(!0))})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))})).catch((function(e){n(e)}))}else t(!1),v.a.warn("Channel domain is not set but required for safari.");else t(!1),v.a.warn("Safari web push ID not set.")}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.isSubscribed(!0))e.confirm&&e.confirm.hideBackdrop(),t();else if(e.isSubscribing)n(new M("A subscription process is already in progress."));else if(e.config.safariWebsitePushId){var i;e.isSubscribing=!0;!function r(o){var s=o.permission,a=o.deviceToken;if(i&&"default"!==s&&clearInterval(i),"default"===s){if(v.a.info("calling window.safari.pushNotification.requestPermission"),e.config.isSafari_12_1){e.cachedSyncParameters||(e.cachedSyncParameters=e.api.getSyncParameters(!0)),Object.keys(e.cachedSyncParameters||{}).forEach((function(t){null===e.cachedSyncParameters[t]&&delete e.cachedSyncParameters[t]}));try{window.safari.pushNotification.requestPermission(e.config.safariWebServiceUrl||"".concat(e.config.apiEndpoint,"/channel/").concat(e.config.channelId,"/safari"),e.config.safariWebsitePushId,e.cachedSyncParameters,r.bind(e))}catch(t){v.a.error("Safari error:",t),e.isSubscribing=!0,n(t)}}else e.api.getSyncParameters().then((function(t){try{window.safari.pushNotification.requestPermission(e.config.safariWebServiceUrl||"".concat(e.config.apiEndpoint,"/channel/").concat(e.config.channelId,"/safari"),e.config.safariWebsitePushId,t,r.bind(e))}catch(t){v.a.error("Safari error:",t),e.isSubscribing=!0,n(t)}}));i=setInterval((function(){var t=window.safari.pushNotification.permission(e.config.safariWebsitePushId);"default"!==t.permission&&r(t)}),100),setTimeout((function(){"default"===window.safari.pushNotification.permission(e.config.safariWebsitePushId).permission&&(i&&clearInterval(i),e.confirm&&e.confirm.hideBackdrop(),e.storageManager.setClosed())}),3e4)}else"denied"===s?(e.confirm&&e.confirm.hideBackdrop(),e.isSubscribing=!0,n(new S.a(Object(O.b)("popup.info").formatCleverPush("<strong>"+(Object(O.b)("confirm.allowBrowser")||Object(O.b)("confirm.allow"))+"</strong>"),"denied"))):"granted"===s&&(e.confirm&&(e.confirm.hideBackdrop(),e.config.confirmAlertSelectTopicsLater&&e.confirm.appendConfirmBox(e.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)),e.sync({deviceToken:a}).then((function(){e.isSubscribing=!1,e.triggerEvent(T.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),t(s)})))}(window.safari.pushNotification.permission(e.config.safariWebsitePushId))}else v.a.warn("Safari Website Push ID missing"),n(new S.a("Safari Website Push ID missing","internal"))}))}},{key:"unsubscribe",value:function(e){var t=this,n=this.storageManager.getSubscriptionId();return n?this.api.unsubscribe(n).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(T.a.UNSUBSCRIBED)})):Promise.resolve()}},{key:"hasNotificationPermission",value:function(){return Promise.resolve("granted"===window.safari.pushNotification.permission(this.config.safariWebsitePushId).permission)}},{key:"getNotificationPermission",value:function(){return window.safari.pushNotification.permission(this.config.safariWebsitePushId).permission}}]),t}(C),A=n(13),B=n.n(A),x=n(17),D=n.n(x);var L=function(e){function t(e,n,i){var r;if(s()(this,t),(r=l()(this,f()(t).call(this,e,n,i))).storageManager.initDb(),e.loadIframe&&r.config.subdomain){var o="https://".concat(r.config.subdomain,".").concat(r.config.cleverpushDomain||"cleverpush.com"),a=document.createElement("div");a.style.display="none",document.body.appendChild(a),D.a.debug=v.a.getLevel()<2;var c=D.a.connectToChild({url:"".concat(o,"/iframe?origin=").concat(encodeURIComponent(location.origin)),appendTo:a,timeout:3e4});c.iframe.style.display="none",c.promise.then((function(e){v.a.debug("child ready",e),r.iframeMessenger=e,e.setConfig(r.config).then((function(){r.triggerEvent(T.a.INITIALIZED)}))})).catch((function(e){v.a.error("iFrame connection error",e),r.triggerEvent(T.a.INITIALIZED)}))}else r.triggerEvent(T.a.INITIALIZED);return!navigator.permissions||"Firefox"===E.a.name&&E.b<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){r.isSubscribing||("granted"!==window.Notification.permission&&r.triggerEvent(T.a.UNSUBSCRIBED),"denied"===window.Notification.permission?r.unsubscribe():r.isSubscribed().then((function(e){e||r.triggerEvent(T.a.PERMISSION_RE_GRANTED)})))}})),r}return p()(t,e),c()(t,[{key:"unsubscribe",value:function(e){var n=this;return this.iframeMessenger?this.iframeMessenger.getSubscriptionId().then((function(i){return n.iframeMessenger.unsubscribe(!0).then((function(){return B()(f()(t.prototype),"unsubscribe",n).call(n,e,i)}))})):B()(f()(t.prototype),"unsubscribe",this).call(this,e)}},{key:"isSubscribedViaSubdomain",value:function(){return!0}},{key:"replaceRootWorker",value:function(){var e=this;return new Promise((function(t){"granted"===window.Notification.permission&&navigator.serviceWorker&&"/"===e.getWorkerScope()&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.scriptURL&&navigator.serviceWorker.controller.scriptURL.indexOf(e.getWorkerPath())<0?(v.a.debug("replacing root service worker..."),navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(e){v.a.debug("replacing root worker result",e),t()})).catch(t)})).catch((function(e){v.a.debug("replacing root service worker failed",e),t()}))):t()}))}},{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);var n=function(){v.a.debug("httpsManager syncAndResolve"),e.storageManager.checkIfShouldSync().then((function(n){n?e.sync().then((function(){v.a.debug("httpsManager subscribed = true (1)"),e.subscribed=!0,t(!0)})).catch((function(n){v.a.warn("error while syncing",n),v.a.debug("httpsManager subscribed = true (2)"),e.subscribed=!0,t(!0)})):(v.a.debug("httpsManager subscribed = true (3)"),e.subscribed=!0,t(!0))}))},i=function(){v.a.debug("httpsManager resubscribe"),e.isSubscribing?(v.a.debug("httpsManager subscribed = true (6)"),e.subscribed=!0,t(!0)):(e.isSubscribing=!0,e.isReSubscribe=!0,e.storageManager.canSubscribe().then((function(n){n?e.registerWorker().then((function(t){return e.pushManagerSubscribe(t)})).then((function(n){return e.sync(n).then((function(){e.isSubscribing=!1,e.triggerEvent(T.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),v.a.debug("httpsManager subscribed = true (4)"),e.subscribed=!0,t(!0)}))})).catch((function(n){v.a.error(n),e.isSubscribing=!1,v.a.debug("httpsManager subscribed = false (5)"),e.subscribed=!1,t(!1)})):(e.isSubscribing=!1,t(!1))})))},r=function(){if("granted"===window.Notification.permission&&navigator.serviceWorker)return e.getActiveWorkerRegistration().then((function(r){return r.pushManager.getSubscription().then((function(o){return e.tryWorkerUpdate(r),o?e.storageManager.isSubscribed().then((function(i){i?n():(v.a.debug("httpsManager subscribed = false (7)"),e.subscribed=!1,t(!1))})):e.config.showConfirmAlertResubscribe?(e.config.showConfirmAlert=!0,void t(!1)):(v.a.debug("isSubscribed: no subscription found -> resubscribe"),void i())}))})).catch((function(n){if(e.config.showConfirmAlertResubscribe)return e.config.showConfirmAlert=!0,void t(!1);v.a.debug("isSubscribed: -> resubscribe ",n),i()}));v.a.debug("isSubscribed: no perm or SW found"),v.a.debug("httpsManager subscribed = false (8)"),e.subscribed=!1,t(!1)};e.replaceRootWorker().then((function(){if(!e.iframeMessenger)return r();e.iframeMessenger.isSubscribed().then((function(t){return v.a.debug("isSubscribed",t),t?e.iframeMessenger.getSubscriptionId().then((function(t){return t===e.storageManager.getSubscriptionId()?r():n()})):r()})).catch((function(n){n&&(v.a.debug("isSubscribed err",n),v.a.error(n)),v.a.debug("httpsManager subscribed = false (9)"),e.subscribed=!1,t(!1)}))}))}))}},{key:"pushManagerSubscribe",value:function(e,t){var n=this;return new Promise((function(i,r){e.pushManager.subscribe(n.getPushManagerSubscribeOptions()).then((function(t){i(t),n.unregisterOtherPushSubscriptions(e)})).catch((function(o){!t&&o&&o.message&&(o.message.indexOf("subscription with a different application server key")>-1||o.message.indexOf("subscription with a different applicationServerKey")>-1)?e.pushManager.getSubscription().then((function(t){t?(n.migratedSubscription=!0,t.unsubscribe().then((function(){n.pushManagerSubscribe(e,!0).then(i).catch(r)})).catch(r)):r(o)})).catch(r):r(o)}))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){if("denied"===window.Notification.permission&&e.config.alertHoursDeny&&"was-denied"===localStorage.getItem("cleverpush-subscription-status")&&"denied"!==sessionStorage.getItem("cleverpush-subscription-status"))return e.config.showUnblockTutorial=!0,e.config.showConfirmAlert=!0,void t(!0);if("PREVIEW"===e.config.env)return t(!0);var i=function(){"denied"===window.Notification.permission?n(new S.a("User has manually denied notifications","unsubscribed")):e.storageManager.canSubscribe().then((function(i){v.a.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):t(!0)})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))}))},r=function(){if("accengage"!==e.config.importedSubscriptionsProvider||!e.config.importedSubscriptionsSubdomain)return i();var n;(n=e.config,new Promise((function(e){window.addEventListener("message",(function t(n){if(console.log("acc message",n.data),n.data&&"mid:get:storage"===n.data.type)if(window.removeEventListener("message",t),n.data.body){var i=JSON.parse(n.data.body);e(!!i&&!0===i.isOptin)}else e(!1)}));var t=document.querySelector('iframe[name="acc_proxy"]');t?t.contentWindow.postMessage({topic:"mid:get:storage",type:"mid:get:storage",body:{}},"*"):((t=document.createElement("iframe")).src="https://"+n.importedSubscriptionsSubdomain+".accengage.net/pushweb/assets/m_main.html",t.style.display="none",t.style.border="none",t.name="acc_proxy",t.onload=function(){t.contentWindow.postMessage({topic:"mid:get:storage",type:"mid:get:storage",body:{}},"*")},t.onerror=function(){return e(!1)},document.body.appendChild(t))}))).then((function(e){if(!e)return i();t(!1)}))};if(!e.iframeMessenger)return r();e.iframeMessenger.canSubscribe().then((function(e){var t=e.result,i=e.message,o=e.reason;if(v.a.debug("canSubscribe from iframe",t),!0===t)return r();n(new S.a(i,o))}),(function(e){e&&v.a.debug("canSubscribe err iframe",e),n(e)}))}))}},{key:"getSubscriptionId",value:function(){var e=this;return new Promise((function(t){var n=e.storageManager.getSubscriptionId();n?t(n):e.iframeMessenger?e.iframeMessenger.getSubscriptionId().then((function(e){t(e)})):t(null)}))}},{key:"hasNotificationPermission",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);"granted"===window.Notification.permission?t(!0):t(!1)}))}},{key:"registerForPush",value:function(){var e=this;return new Promise((function(t,n){e.storageManager.setAllowed(),!(e.topics||[]).length&&e.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==e.config.confirmAlertNativeTheme&&e.confirm&&e.confirm.hasTopicCheckboxes()&&e.setTopics(e.confirm.getSelectedTopics()),e.registerWorker().then((function(t){return e.pushManagerSubscribe(t)})).then((function(n){return v.a.debug("push manager subscription",n),e.sync(n).then((function(){e.isSubscribing=!1,e.triggerEvent(T.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),t("granted")}))})).catch((function(t){v.a.error(t),e.isSubscribing=!1,n(t)}))}))}},{key:"subscribeForce",value:function(e){var t=this;return new Promise((function(i,r){e?i():t.isSubscribing?r(new M("A subscription process is already in progress.")):(t.isSubscribing=!0,"default"===Notification.permission?Notification.requestPermission((function(e){if("granted"===e){if(t.registerForPushLater=!1,t.registerForPushLater?t.storageManager.setPending():t.registerForPush().then(i).catch(r),t.confirm&&(t.confirm.hideBackdrop(e),t.config.confirmAlertSelectTopicsLater&&(t.confirm.channelTopics||[]).length&&!t.config.confirmAlertHideChannelTopics&&(t.confirm.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0),t.config.confirmAlertSubscribeLater&&(t.registerForPushLater=!0)),t.config.confirmAlertSelectAttributesLater)){var o=n(!function(){var e=new Error("Cannot find module '../selectAttributes'");throw e.code="MODULE_NOT_FOUND",e}()).default;t.selectAttributes=new o(t.config,t),t.selectAttributes.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)}}else t.isSubscribing=!1,"default"===e&&(t.storageManager.setClosed(),"Firefox"===E.a.name&&t.storageManager.setTempBlocked()),"denied"===e&&(t.api.confirmAlertDenied(),t.storageManager.setDenied()),r(new S.a(Object(O.b)("popup.info").formatCleverPush("<strong>"+(Object(O.b)("confirm.allowBrowser")||Object(O.b)("confirm.allow"))+"</strong>"),e));v.a.debug("HTTP Permission Request Result:",e)})):"denied"===Notification.permission?(t.isSubscribing=!1,r(new S.a(Object(O.b)("popup.info").formatCleverPush("<strong>"+(Object(O.b)("confirm.allowBrowser")||Object(O.b)("confirm.allow"))+"</strong>"),"denied"))):(v.a.debug("PermissionAlreadyGranted"),t.registerForPush().then(i).catch(r),t.confirm&&t.confirm.hideBackdrop("granted")))}))}},{key:"subscribe",value:function(){var e=this;return this.isSubscribed().then((function(t){return e.subscribeForce(t)}))}},{key:"setClickedNotification",value:function(e){this.storageManager.setClickedNotification(e),this.iframeMessenger&&this.iframeMessenger.setClickedNotification(e)}},{key:"getClickedNotification",value:function(){var e=this;return new Promise((function(t){var n=e.storageManager.getClickedNotification();!n&&e.iframeMessenger?e.iframeMessenger.getClickedNotification().then((function(e){t(e)})):t(n)}))}}]),t}(C),R=n(5),U=n.n(R);var j=function(e){function t(e,n,i){var r;if(s()(this,t),(r=l()(this,f()(t).call(this,e,n,i))).isSubscribing=!1,r.iframeMessenger=null,r.popupMessenger=null,r.setTopics=r.setTopics.bind(U()(r)),r.config.subdomain&&r.config.subdomain.length&&!1!==r.config.loadIframe){var o="https://".concat(r.config.subdomain.toLowerCase(),".").concat(r.config.cleverpushDomain||"cleverpush.com"),a=document.createElement("div");a.style.display="none",document.body.appendChild(a),D.a.debug=v.a.getLevel()<2;var c=D.a.connectToChild({url:"".concat(o,"/iframe?origin=").concat(encodeURIComponent(location.origin)),appendTo:a,methods:{onSubscribed:function(e){r.triggerEvent(T.a.SUBSCRIBED,e)}}});c.iframe.style.display="none",c.promise.then((function(e){v.a.debug("child ready",e),r.iframeMessenger=e,e.setConfig(r.config).then((function(){r.triggerEvent(T.a.INITIALIZED)})),r.getTopics().then((function(e){return r.topics=e}))})).catch((function(){v.a.debug("iframe connection failed"),r.triggerEvent(T.a.INITIALIZED)}))}else v.a.debug("iframe subdomain not available"),r.triggerEvent(T.a.INITIALIZED);return!navigator.permissions||"Firefox"===E.a.name&&E.b<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){r.isSubscribing||("denied"===window.Notification.permission?r.unsubscribe():"granted"===window.Notification.permission&&r.isSubscribed().then((function(e){e||r.triggerEvent(T.a.PERMISSION_RE_GRANTED)})))}})),r}return p()(t,e),c()(t,[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.isSubscribed().then((function(n){v.a.debug("isSubscribed from iframe",n),n?(v.a.debug("hostManager subscribed = true (3)"),e.subscribed=!0,t(!0)):e.storageManager.isSubscribed(!1).then((function(n){n?e.storageManager.checkIfShouldSync().then((function(n){n&&e.sync().then((function(){v.a.debug("hostManager subscribed = true (1)"),e.subscribed=!0,t(!0)})).catch((function(n){v.a.warn("error while syncing",n),v.a.debug("hostManager subscribed = true (2)"),e.subscribed=!0,t(!0)}))})):(v.a.debug("hostManager subscribed = false (4)"),e.subscribed=!1,t(!1))}))})).catch((function(n){n&&(v.a.debug("isSubscribed err",n),v.a.error(n)),v.a.debug("hostManager subscribed = false (5)"),e.subscribed=!1,t(!1)})):(v.a.debug("hostManager subscribed = false (6)"),e.subscribed=!1,t(!1))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){e.iframeMessenger?e.iframeMessenger.canSubscribe().then((function(i){var r=i.result,o=i.message,s=i.reason;v.a.debug("canSubscribe from iframe",r),!0===r?e.storageManager.canSubscribe().then((function(i){v.a.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):t(!0)})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))})):n(new S.a(o,s))}),(function(e){v.a.debug("canSubscribe err iframe",e),n(e)})):e.storageManager.canSubscribe().then((function(i){v.a.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):t(!0)})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))}))}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e,t=this;if(!this.isSubscribing){var i="https://".concat(this.config.subdomain||this.config.channelSubdomain,".").concat(this.config.cleverpushDomain||"cleverpush.com","/subscribe");this.config.confirmAlertTestId&&(i+="?confirmAlertTestId=".concat(this.config.confirmAlertTestId)),e=function(e,t,n,i){Object(v.b)("popup",e,t,n);var r=void 0!==window.screenLeft?window.screenLeft:screen.left,o=void 0!==window.screenTop?window.screenTop:screen.top,s=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-t/2+r,a=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-n/2+o,c="scrollbars=yes";"boolean"==typeof i&&i&&(a=1e5,s=1e5,c="toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,visible=none");var u=window.open(e,"_blank","width=".concat(t,", height=").concat(n,", top=").concat(a,", left=").concat(s).concat(void 0!==c?c:""));return u&&(!i&&u.focus?u.focus():i&&(u.blur(),u.opener.window.focus(),window.self.window.blur(),window.focus())),u}(i,800,600)}return new Promise((function(i,r){if(t.isSubscribing)v.a.error("A subscription process is already in progress."),r(new M);else{t.isSubscribing=!0;var o=function(){t.isSubscribing=!1,t.getSubscriptionId().then((function(e){if(e){if(t.storageManager.setSubscribed(e),t.iframeMessenger&&t.iframeMessenger.setSubscribed(e),t.triggerEvent(T.a.SUBSCRIBED,e),t.config.confirmAlertSelectTopicsLater&&!t.config.confirmAlertHideChannelTopics&&t.confirm.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0),t.config.confirmAlertSelectAttributesLater){var r=n(!function(){var e=new Error("Cannot find module '../selectAttributes'");throw e.code="MODULE_NOT_FOUND",e}()).default;t.selectAttributes=new r(t.config,t),t.selectAttributes.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)}i("granted")}else t.storageManager.setClosed(),i("default")}))};e?function(e,t){if(e){var n,i=function(){n&&(clearInterval(n),n=null),t()};n=setInterval((function(){try{e&&!e.closed||i()}catch(e){i()}}),100)}}(e,o):(v.a.error("Popup blocked - Somehow we tried to open a popup without a click event."),o())}}))}},{key:"unsubscribe",value:function(e){var t=this;if(this.iframeMessenger)return this.iframeMessenger.unsubscribe(e).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(T.a.UNSUBSCRIBED)}));this.storageManager.setUnsubscribed(e),this.triggerEvent(T.a.UNSUBSCRIBED)}},{key:"getSubscriptionId",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger.getSubscriptionId().then((function(e){t(e)}))}))}},{key:"hasNotificationPermission",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);e.iframeMessenger?e.iframeMessenger.hasNotificationPermission().then((function(e){t(e)})):t(!1)}))}},{key:"getNotificationPermission",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.getNotificationPermission().then((function(e){t(e)})):t()}))}},{key:"setTopics",value:function(e){return this.topics=e,this.iframeMessenger?this.iframeMessenger.setTopics(e):Promise.resolve()}},{key:"getTopics",value:function(){return this.iframeMessenger?this.iframeMessenger.getTopics():Promise.resolve([])}},{key:"getStoredNotifications",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.getStoredNotifications().then((function(e){t(e)})):t([])}))}},{key:"deleteStoredNotification",value:function(e){var t=this;return new Promise((function(n){t.iframeMessenger?t.iframeMessenger.deleteStoredNotification(e).then(n):n()}))}}]),t}(C),W=n(25),F=n.n(W),q=function(e){function t(e,n,i){var r,o;if(s()(this,t),(r=l()(this,f()(t).call(this,e,n,i))).storageManager.initDb(),r.config=e,r.api=n,r.isSubscribing=!1,r.iframeMessenger=null,(window.opener||window.parent)===window)return document.write('<p style="font-size: 14px; color: red; font-family: sans-serif;">CleverPush: This page cannot be directly opened, and\nmust be opened as a result of a subscription call.</p>'),l()(r);if("undefined"!=typeof URLSearchParams&&location.search){var a=new URLSearchParams(location.search.slice(1));a.get("origin")&&(o=a.get("origin"))}v.a.debug("PenPal parentOrigin",o),D.a.debug=v.a.getLevel()<2;D.a.connectToParent({parentOrigin:o,methods:{subscribe:r.subscribe.bind(U()(r)),setSubscribed:r.setSubscribed.bind(U()(r)),setDenied:r.setDenied.bind(U()(r)),setClosed:r.setClosed.bind(U()(r)),setUnsubscribed:r.setUnsubscribed.bind(U()(r)),unsubscribe:r.unsubscribe.bind(U()(r)),isSubscribed:r.isSubscribed.bind(U()(r)),canSubscribe:r.canSubscribe.bind(U()(r)),setTopics:B()(f()(t.prototype),"setTopics",U()(r)).bind(U()(r)),getTopics:B()(f()(t.prototype),"getTopics",U()(r)).bind(U()(r)),getSubscriptionId:B()(f()(t.prototype),"getSubscriptionId",U()(r)).bind(U()(r)),hasNotificationPermission:B()(f()(t.prototype),"hasNotificationPermission",U()(r)).bind(U()(r)),getNotificationPermission:B()(f()(t.prototype),"getNotificationPermission",U()(r)).bind(U()(r)),setClickedNotification:B()(f()(t.prototype),"setClickedNotification",U()(r)).bind(U()(r)),getClickedNotification:B()(f()(t.prototype),"getClickedNotification",U()(r)).bind(U()(r)),getStoredNotifications:B()(f()(t.prototype),"getStoredNotifications",U()(r)).bind(U()(r)),deleteStoredNotification:B()(f()(t.prototype),"deleteStoredNotification",U()(r)).bind(U()(r)),setConfig:function(e){return F()(f()(t.prototype),"config",e,U()(r),!0),r.config=e,r.config.confirmAlertTestId&&r.api.setConfirmAlertTestId(r.config.confirmAlertTestId),Promise.resolve()},getStorage:function(){try{Promise.resolve({"cleverpush-subscription-id":localStorage.get("cleverpush-subscription-id"),"cleverpush-subscription-status":localStorage.get("cleverpush-subscription-status")})}catch(e){Promise.resolve({"cleverpush-subscription-id":void 0,"cleverpush-subscription-status":void 0})}}}});return!navigator.permissions||"Firefox"===E.a.name&&E.b<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){r.isSubscribing||("granted"!==window.Notification.permission?r.unsubscribe():r.isSubscribed((function(e){e||r.subscribe()})))}})),r}return p()(t,e),c()(t,[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){try{e.storageManager.isSubscribed(!1,!1,!0).then((function(e){v.a.debug("Status: storage status:",e),t(e)}))}catch(e){t(!1)}}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t){try{e.storageManager.canSubscribe().then((function(n){n?e.isSubscribed().then((function(e){t(e?{result:!1,message:"User is already subscribed",reason:"subscribed"}:{result:!0})})):t({result:!1,message:"User has manually unsubscribed or denied notifications",reason:"unsubscribed"})}))}catch(e){t({result:!0})}}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.isSubscribing)v.a.error("A subscription process is already in progress."),n(new M);else{e.isSubscribing=!0;var i=function(){e.storageManager.isSubscribed().then((function(e){t({permission:"granted",serviceWorkerInstalled:e})}))};"default"===Notification.permission?Notification.requestPermission((function(n){e.isSubscribing=!1,"granted"===n?i():t({permission:n}),v.a.debug("HTTP Permission Request Result:",n)})):"denied"===Notification.permission?(e.isSubscribing=!1,t({permission:"denied"})):(e.isSubscribing=!1,v.a.debug("PermissionAlreadyGranted"),i())}}))}},{key:"setSubscribed",value:function(e){try{this.storageManager.setSubscribed(e,!0)}catch(e){}}},{key:"setDenied",value:function(){try{this.storageManager.setDenied()}catch(e){}}},{key:"setClosed",value:function(){try{this.storageManager.setClosed()}catch(e){}}},{key:"setUnsubscribed",value:function(e){try{this.storageManager.setUnsubscribed(e)}catch(e){}}},{key:"unsubscribe",value:function(e){var t=this;return new Promise((function(n){var i;try{i=t.storageManager.getSubscriptionId()}catch(e){}return i?t.api.unsubscribe(i).then((function(){try{t.storageManager.setUnsubscribed(e)}catch(e){}return n()})).catch((function(){return n()})):n()}))}}]),t}(C),V=n(16),z=function(e){function t(e,n,i){var r;s()(this,t),(r=l()(this,f()(t).call(this,e,n,i))).config=e,r.isSubscribing=!1,r.popupMessenger=null;var o=localStorage.getItem("cleverpush-topics");if(o)try{r.topics=JSON.parse(o)}catch(e){}return Object(V.b)().then((function(){r.subscribe().then((function(e){v.a.debug(e);var t=document.getElementById("loading");t&&(t.style.display="none");var n=document.getElementById("status");n&&(n.style.display="none");var i=document.getElementById("success");i&&(i.style.display="block"),setTimeout((function(){window.onbeforeunload=null,window.opener?window.close():history.back()}),1e3)})).catch((function(e){if(v.a.error(e),"default"!==e.reason||!r.config.showConfirmAlertForce){var t=document.getElementById("loading");t&&(t.style.display="none");var n=document.getElementById("status");if(n&&(n.style.display="block",n.innerHTML="<h2>".concat(e?e.message||e.reason||e:"Unbekannter Fehler ist aufgetreten.","</h2>")),"denied"===e.reason||"default"===e.reason){window.onbeforeunload=null;var i=document.querySelector(".subscribe-helper-text");i&&(i.style.marginTop=0);var o=document.getElementById("unblock-tutorial");if(o){var s=new w.a,a=s.getBrowser().name,c=s.getOS().name;if(a=a.toLowerCase().replace(/\s/g,"").replace("chromium","chrome"),c=c.toLowerCase().replace(/\s/g,"").replace("macos","mac"),!("chrome"!==a&&"firefox"!==a&&"safari"!==a||"android"!==c&&"windows"!==c&&"mac"!==c)){var u=document.createElement("img");u.src="https://static.cleverpush.com/app/images/unblock-tutorial/".concat(a,"-").concat(c,".gif"),u.style.display="initial",o.appendChild(u),o.style.display="initial"}}}}}))})),r}return p()(t,e),c()(t,[{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){var i=e.config.alertLocalization||{},r=(navigator.language||navigator.userLanguage||"").substr(0,2);e.config.alertLocalizationTranslations&&r&&e.config.alertLocalizationTranslations[r]&&(i=Object.assign({},i,e.config.alertLocalizationTranslations[r]));var o={popupInfo:i.popupInfo||Object(O.b)("popup.info").formatCleverPush("<strong>".concat(Object(O.b)("confirm.allowBrowser")||Object(O.b)("confirm.allow"),"</strong>")),popupText:i.popupText||Object(O.b)("popup.text").formatCleverPush("<strong>".concat(e.config.channelName,"</strong>"))};if(e.isSubscribing)n(new M("A subscription process is already in progress."));else{e.isSubscribing=!0;var s=function(){e.registerWorker().then((function(t){return t.pushManager.subscribe(e.getPushManagerSubscribeOptions())})).then((function(n){e.sync(n).then((function(){e.isSubscribing=!1,e.triggerEvent(T.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),t("granted")}))})).catch((function(t){v.a.error(t),e.isSubscribing=!1,n(t)}))};if("default"===Notification.permission){var a=document.getElementById("status");a&&(a.style.display="block",a.innerHTML="<h2>".concat(o.popupInfo,"</h2><p>").concat(o.popupText,"</p>")),Notification.requestPermission((function(t){"granted"===t?s():(e.isSubscribing=!1,n(new S.a(o.popupInfo,t))),e.confirm&&e.confirm.hideBackdrop(),v.a.debug("HTTP Permission Request Result:",t)}))}else"denied"===Notification.permission?(e.isSubscribing=!1,n(new S.a(o.popupInfo,"denied"))):(v.a.debug("PermissionAlreadyGranted"),s())}}))}}]),t}(C),H=function(e){function t(e,n,i){var r;return s()(this,t),r=l()(this,f()(t).call(this,e,n,i)),e.multiChannels&&e.multiChannels.facebookChannel&&e.multiChannels.facebookChannel._id!==e.channelId&&(e.channelId=e.multiChannels.facebookChannel._id,n.channelId=e.channelId),r.triggerEvent(T.a.INITIALIZED),r}return p()(t,e),c()(t,[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){e.subscribed=!!e.storageManager.getFacebookUserRef()||!!e.storageManager.isSubscribed(!0,!0),t(e.subscribed)}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){"true"!==new URLSearchParams(location.search.slice(1)).get("cleverPushFacebookClick")?"denied"!==localStorage.getItem("cleverpush-subscription-status")?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):t(!0)})).catch(n):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed")):n(new S.a("User is already subscribed","subscribed"))}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"setFacebookUserRef",value:function(e){var t=this;this.storageManager.setFacebookUserRef(e),this.sync({facebookUserRef:e}).then((function(){t.isSubscribing=!1,t.triggerEvent(T.a.SUBSCRIBED,t.storageManager.getSubscriptionId()),t.resolveSubscribe&&t.resolveSubscribe("granted")}))}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){e.config.facebookAppId&&e.config.facebookPageId?(window.open("https://m.me/".concat(e.config.facebookPageId),"_blank"),localStorage.setItem("cleverpush-subscription-status","allowed"),e.triggerEvent(T.a.SUBSCRIBED,null),t()):(v.a.warn("Facebook App ID or Page ID missing"),n()),e.confirm&&e.confirm.hideBackdrop()}))}},{key:"unsubscribe",value:function(e){var t=this,n=this.storageManager.getSubscriptionId();return n?this.api.unsubscribe(n).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(T.a.UNSUBSCRIBED)})):Promise.resolve()}},{key:"hasNotificationPermission",value:function(){return Promise.resolve(!!this.storageManager.getFacebookUserRef())}},{key:"getNotificationPermission",value:function(){return Promise.resolve(this.storageManager.getFacebookUserRef()?"granted":"default")}}],[{key:"initFacebook",value:function(e){if(t.facebookInitialized)e();else{window.fbAsyncInit=function(){v.a.debug("window.fbAsyncInit"),FB.init({appId:CleverPush.config.facebookAppId,version:"v2.9"}),t.facebookInitialized=!0,e()};var n="en_US",i=(navigator.language||navigator.userLanguage||"").replace("-","_").substr(0,5);i&&i!==n&&["en_US","ca_ES","cs_CZ","cx_PH","cy_GB","da_DK","de_DE","eu_ES","en_UD","es_LA","es_ES","gn_PY","fi_FI","fr_FR","gl_ES","hu_HU","it_IT","ja_JP","ko_KR","nb_NO","nn_NO","nl_NL","fy_NL","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sl_SI","sv_SE","th_TH","tr_TR","ku_TR","zh_CN","zh_HK","zh_TW","af_ZA","sq_AL","hy_AM","az_AZ","be_BY","bn_IN","bs_BA","bg_BG","hr_HR","nl_BE","en_GB","et_EE","fo_FO","fr_CA","ka_GE","el_GR","gu_IN","hi_IN","is_IS","id_ID","ga_IE","jv_ID","kn_IN","kk_KZ","lv_LV","lt_LT","mk_MK","mg_MG","ms_MY","mt_MT","mr_IN","mn_MN","ne_NP","pa_IN","sr_RS","so_SO","sw_KE","tl_PH","ta_IN","te_IN","ml_IN","uk_UA","uz_UZ","vi_VN","km_KH","tg_TJ","ar_AR","he_IL","ur_PK","fa_IR","ps_AF","my_MM","qz_MM","or_IN","si_LK","rw_RW","cb_IQ","ha_NG","ja_KS","br_FR","tz_MA","co_FR","as_IN","ff_NG","sc_IT","sz_PL"].forEach((function(e){e!==i&&e.substr(0,2)!==i.substr(0,2)||(n=e)})),r=document,o="script",s="facebook-jssdk",c=r.getElementsByTagName(o)[0],r.getElementById(s)||((a=r.createElement(o)).id=s,a.src="//connect.facebook.net/"+n+"/sdk.js",c.parentNode.insertBefore(a,c))}var r,o,s,a,c}}]),t}(C),K=n(26),G=function(){function e(t,i,r,o,a){s()(this,e),this.config=t,this.subscriptionManager=i,this.isSubscribed=this.subscriptionManager.subscribed,this.api=r,this.confirm=o,this.triggerEvent=a,this.config.bellLocalization&&this.config.bellLocalization.subscribed?this.messageSubscribed=this.config.bellLocalization.subscribed:this.messageSubscribed=Object(O.b)("bell.subscribed"),this.config.bellLocalization&&this.config.bellLocalization.subscribe?this.messageSubscribe=this.config.bellLocalization.subscribe:this.messageSubscribe=Object(O.b)("bell.subscribe"),this.config.bellLocalization&&this.config.bellLocalization.hide?this.messageHide=this.config.bellLocalization.hide:this.messageHide=Object(O.b)("bell.hide"),this.show=this.show.bind(this),this.reset=this.reset.bind(this),this.onClick=this.onClick.bind(this),n(!function(){var e=new Error("Cannot find module './bell.scss'");throw e.code="MODULE_NOT_FOUND",e}())}return c()(e,[{key:"getClassName",value:function(){var e="cleverpush-bell";return this.config.notificationBellPosition&&(e+=" cleverpush-bell-position-"+this.config.notificationBellPosition),e}},{key:"initPrompt",value:function(){var e=this;if(!(this.promptInited||this.isSubscribed||window.innerWidth<768||localStorage.getItem("cleverpush-bell-prompt-denied"))){this.promptInited=!0;var t=this.confirm.getLocalization({});this.prompt=document.createElement("div"),this.prompt.className="cleverpush-bell-prompt",this.prompt.innerHTML='\n    <div class="cleverpush-bell-prompt-icon" style="background-image: url(\''.concat(this.config.channelIcon,'\')"></div>\n    <div class="cleverpush-bell-prompt-content">\n      <div class="cleverpush-bell-prompt-title">\n      ').concat(t.title,'\n      </div>\n      <div class="cleverpush-bell-prompt-buttons">\n      <button class="cleverpush-confirm-btn cleverpush-confirm-btn-deny">').concat(t.deny,'</button>\n        <button class="cleverpush-confirm-btn cleverpush-confirm-btn-allow" style="').concat(this.config.confirmAlertAllowButtonStyle&&this.config.confirmAlertAllowButtonStyle.color?"color: "+this.config.confirmAlertAllowButtonStyle.color+";":""," ").concat(this.config.confirmAlertAllowButtonStyle&&this.config.confirmAlertAllowButtonStyle.backgroundColor?"border-color: transparent !important; background: none; background-color: "+this.config.confirmAlertAllowButtonStyle.backgroundColor+";":"",'">').concat(t.allow,"</button>\n      </div>\n    </div>\n    "),this.promptAllow=this.prompt.querySelector(".cleverpush-confirm-btn-allow"),this.promptAllow&&this.promptAllow.addEventListener("click",(function(t){t.preventDefault(),e.prompt.style.display="none"})),this.promptDeny=this.prompt.querySelector(".cleverpush-confirm-btn-deny"),this.promptDeny&&this.promptDeny.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),localStorage.setItem("cleverpush-bell-prompt-denied",Date.now()+""),e.prompt.style.display="none"})),this.bell.appendChild(this.prompt)}}},{key:"show",value:function(e){var t=this;Object(v.b)("bell.show",e),this.isSubscribed=e;var n=!1;try{n="true"===localStorage.getItem("cleverpush-bell-hidden")}catch(e){}if(!n){var i,r=this.getClassName();e?(r+=" cleverpush-bell-disabled",i=this.messageSubscribed,this.config.hideNotificationBellSubscribed&&(r+=" cleverpush-bell-hidden")):i=this.messageSubscribe;var o="";if(this.config.notificationBellMoreButtons&&(o='<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-settings" style="display: none"><svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M18.88 12.88a6.83 6.83 0 0 0 0-1.76l1.95-1.49a.45.45 0 0 0 .11-.57l-1.85-3.12c-.11-.2-.36-.27-.56-.2l-2.3.9a6.8 6.8 0 0 0-1.57-.88l-.35-2.38a.45.45 0 0 0-.46-.38h-3.7a.45.45 0 0 0-.45.38l-.35 2.38c-.57.23-1.09.53-1.57.88l-2.3-.9a.46.46 0 0 0-.57.2L3.06 9.06c-.12.2-.06.44.12.57l1.95 1.49a6.95 6.95 0 0 0 0 1.76l-1.95 1.49a.45.45 0 0 0-.12.57l1.85 3.12c.12.2.37.27.57.2l2.3-.9c.48.36 1 .65 1.57.88l.35 2.38c.03.22.22.38.45.38h3.7c.23 0 .43-.16.46-.38l.35-2.38a7.16 7.16 0 0 0 1.56-.88l2.3.9c.22.08.46 0 .57-.2l1.85-3.12a.45.45 0 0 0-.11-.57l-1.95-1.49zM12 15.15A3.2 3.2 0 0 1 8.76 12 3.2 3.2 0 0 1 12 8.85 3.2 3.2 0 0 1 15.24 12 3.2 3.2 0 0 1 12 15.15z" id="park-svg-settings-path-1"></path></defs><use xlink:href="#park-svg-settings-path-1" transform="translate(-3 -3)" stroke="none" stroke-width="1" fill-rule="evenodd"></use></svg><span class="cleverpush-tooltip">'.concat(Object(O.b)("panel.settings"),'</span></button>\n<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-subscribe" style="display: none"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n<g><path d="M380.6,989.9c-30.5,0-59.3-14.2-77.8-38.7L52.6,621C20,578,28.5,516.8,71.5,484.3c43-32.6,104.1-24.1,136.7,18.9l164.6,217.3L786.7,56c28.5-45.7,88.7-59.7,134.5-31.2c45.8,28.4,59.7,88.7,31.2,134.4L463.5,944c-17,27.4-46.4,44.5-78.5,45.9C383.6,990,382.1,990,380.6,989.9L380.6,989.9z"/></g>\n</svg><span class="cleverpush-tooltip">').concat(this.messageSubscribe,'</span></button>\n<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-hide" style="display: none"><svg viewBox="0 0 8 8" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M8 6.87L6.87 8 4 5.13 1.13 8 0 6.87 2.87 4 0 1.13 1.13 0 4 2.87 6.87 0 8 1.13 5.13 4z"></path></svg><span class="cleverpush-tooltip">').concat(this.messageHide,"</span></button>\n")),this.bell=document.createElement("div"),this.bell.className=r,this.bell.innerHTML="".concat(o,"<div class='cleverpush-bell-message'>").concat(i,"</div>"),document.body.appendChild(this.bell),this.bell&&(this.bell.addEventListener("click",this.onClick.bind(this)),this.config.notificationBellColor&&this.config.notificationBellColor.length&&(this.bell.style.backgroundColor=this.config.notificationBellColor),this.config.notificationBellOffsetBottom&&(this.bell.style.bottom=this.config.notificationBellOffsetBottom+"px"),this.config.notificationBellOffsetLeft&&"right"!==this.config.notificationBellPosition&&(this.bell.style.left=this.config.notificationBellOffsetLeft+"px"),this.config.notificationBellOffsetRight&&"left"!==this.config.notificationBellPosition&&(this.bell.style.right=this.config.notificationBellOffsetRight+"px"),this.config.notificationBellMoreButtons&&this.initMoreButtons()),this.config.showNotificationBellPrompt){var s=!0;if(this.config.notificationBellPromptVisits){var a=parseInt(localStorage.getItem("cleverpush-bell-prompt-visits"),10)||0;s=a>=this.config.notificationBellPromptVisits,a+=1,localStorage.setItem("cleverpush-bell-prompt-visits",a+"")}s&&setTimeout((function(){t.initPrompt()}),this.config.notificationBellPromptSeconds||0)}}}},{key:"initMoreButtons",value:function(){var e=this;this.settingsButton=this.bell.querySelector(".cleverpush-bell-more-settings"),this.settingsButton.onclick=function(t){t.stopPropagation(),e.moreButtonsVisible=!1,e.settingsButton.style.display="none",e.hideButton.style.display="none",e.config.notificationBellSettingsLink?window.open(e.config.notificationBellSettingsLink,"_blank"):e.showPanel()},this.subscribeButton=this.bell.querySelector(".cleverpush-bell-more-subscribe"),this.subscribeButton.onclick=function(t){t.stopPropagation(),e.moreButtonsVisible=!1,e.subscribeButton.style.display="none",e.hideButton.style.display="none",e.subscribe()},this.hideButton=this.bell.querySelector(".cleverpush-bell-more-hide"),this.hideButton.onclick=function(t){t.stopPropagation(),e.hideForever()}}},{key:"reset",value:function(e){if(Object(v.b)("bell.reset",e),this.isSubscribed=e,this.moreButtonsVisible=!1,this.bell){var t,n=this.getClassName();e?(n+=" cleverpush-bell-disabled",this.config.hideNotificationBellSubscribed&&(n+=" cleverpush-bell-hidden"),t=this.messageSubscribed):t=this.messageSubscribe,this.bell.className=n;var i=this.bell.querySelector(".cleverpush-bell-message");i&&(i.innerHTML=t);var r=this.bell.querySelector(".cleverpush-loader");r&&r.parentNode&&r.parentNode.removeChild(r),this.config.notificationBellMoreButtons&&this.initMoreButtons()}e&&this.prompt&&(this.prompt.style.display="none")}},{key:"hideForever",value:function(){localStorage.setItem("cleverpush-bell-hidden","true"),this.bell.style.display="none"}},{key:"showMessage",value:function(e,t){if(this.bell){var n=this.bell.querySelector(".cleverpush-bell-message");n.className+=" cleverpush-bell-message-open",n.innerHTML=e,setTimeout((function(){n.innerHTML=Object(O.b)("bell.subscribe"),n.className="cleverpush-bell-message"}),1e3*t)}}},{key:"showPanel",value:function(){this.panel||(this.panel=new K.a(this.config,this.subscriptionManager,this.triggerEvent,this.api)),this.panel.show()}},{key:"setLoading",value:function(){this.bell.className+=" cleverpush-bell-loading",this.bell.innerHTML+='<div class="cleverpush-loader"><div></div><div></div><div></div><div></div></div>'}},{key:"subscribe",value:function(){var e=this;Object(v.b)("bell.subscribe");var t=this.subscriptionManager.getNotificationPermission(!0),n="default"===t;if(this.config.channelTopics&&this.config.channelTopics.length&&(this.config.confirmAlertSelectTopicsLater=!0),this.api.fromBellWidget=!0,this.api.confirmAlertShown(),!this.subscriptionManager.isSubscribing){v.a.debug("showBackdrop",n),"denied"!==t&&this.setLoading();var i=function(){"PREVIEW"!==e.config.env&&e.subscriptionManager.subscribeForce(e.isSubscribed).then((function(t){e.confirm&&n&&e.confirm.hideBackdrop(),"denied"===t&&e.subscriptionManager.confirm&&e.subscriptionManager.confirm.showBackdrop(void 0,"denied",Object(O.b)("popup.info").formatCleverPush("<strong>"+(Object(O.b)("confirm.allowBrowser")||Object(O.b)("confirm.allow"))+"</strong>"))})).catch((function(i){e.reset(e.isSubscribed),"default"!==t&&"denied"===i.reason&&e.subscriptionManager.confirm&&e.subscriptionManager.confirm.showBackdrop(void 0,"denied",i.message),function(t){e.confirm&&n&&e.confirm.hideBackdrop(),!t.message||t instanceof M||e.showMessage(t.message,5),!e.config.ownDomain||"https:"!==location.protocol||"denied"!==t.reason&&"default"!==t.reason?t&&v.a.error(t):e.subscriptionManager.confirm&&e.subscriptionManager.confirm.showBackdrop(void 0,"denied",t.message)}(n)}))};Object(V.b)().then((function(){e.confirm&&n?(e.confirm.showBackdrop(),i()):e.confirm&&"granted"===t?e.confirm.appendConfirmBox(e.config.confirmAlertTheme,void 0,void 0,(function(t){t?i():e.reset(e.isSubscribed)})):i()}))}}},{key:"toggleMoreButtons",value:function(){Object(v.b)("bell.toggleMoreButtons");var e=this.bell.querySelector(".cleverpush-bell-message");this.moreButtonsVisible?(this.settingsButton.style.display="none",this.subscribeButton.style.display="none",this.hideButton.style.display="none",this.moreButtonsVisible=!1,this.isSubscribed&&(this.bell.className+=" cleverpush-bell-disabled"),e&&window.innerWidth<768&&(e.className="cleverpush-bell-message"),window.document.activeElement&&window.document.activeElement.blur()):(this.isSubscribed?(this.settingsButton.style.display="flex",this.bell.className=this.getClassName()):this.subscribeButton.style.display="flex",this.hideButton.style.display="flex",this.moreButtonsVisible=!0,e&&window.innerWidth<768&&(e.className+=" cleverpush-bell-message-open"))}},{key:"onClick",value:function(){var e=this;if(Object(v.b)("bell.onClick",!!this.bell),this.bell){"function"==typeof this.handleLoadSdk?(this.setLoading(),this.handleLoadSdk().then((function(){window.CleverPush.waitForBell().then((function(){e.bell.parentNode.removeChild(e.bell),window.CleverPush.bell.onClick()}))})).catch((function(e){v.a.error("Bell loading failed",e)}))):e.config.notificationBellMoreButtons?e.toggleMoreButtons():e.isSubscribed?e.showPanel():e.subscribe()}}}]),e}(),Z=function(e){function t(){var e;return s()(this,t),(e=l()(this,f()(t).call(this))).config={},e.log=v.a,e.initialized=!1,e.initCalled=!1,e.api=null,e.subscriptionManager=null,e.version="0.6.1",e}return p()(t,e),c()(t,[{key:"init",value:function(e,t){var n=this;Object(v.b)("init",e),v.a.info("Browser:",E.a.name,E.b);var i=function(e,i){var r=void 0!==i?i:!e;"function"==typeof t?t(e,r):e&&(e.warn||"unsupported-browser"===e.reason||"private-mode"===e.reason||"already-initialized"===e.reason||"init-already-called"===e.reason?v.a.warn(e.message):v.a.error(e)),"function"==typeof window.cleverPushInitCallback&&window.cleverPushInitCallback(e,r),e&&n.trigger(T.a.INITIALIZATION_FAILED)};this.initCalled?i(new S.a("Init was already called, please only call init() once.","init-already-called"),!1):(this.initCalled=!0,"object"!==r()(e)?i(new S.a("Required parameter `config` not given.","invalid-config")):e.channelId?this.initialized?i(new S.a("CleverPush SDK was already initialized.","already-initialized")):(this.api=new I(e.channelId),Object(E.i)().then((function(t){e.apiEndpoint&&(n.api.endpoint=e.apiEndpoint);new y.a((function(t){"undefined"==typeof fetch||void 0!==e.loadConfig&&!e.loadConfig?e.loadConfigUrl?k(e.loadConfigUrl).then((function(e){t(e||{})})):t({}):n.api.getChannelConfig(!1).then((function(e){t(e)}))})).then((function(t){n.config=Object.assign({autoRegister:!0,alertTimeout:0,alertMinimumVisits:0,loadIframe:!0,trackSessions:!0},t,e),"object"===r()(self.cleverPushConfig)&&(n.config=Object.assign(n.config,self.cleverPushConfig)),v.a.debug("Config:",n.config),n.config.apiEndpoint&&(n.api.endpoint=n.config.apiEndpoint),Object(V.c)().then((function(){var e;if(e="safari"===n.browserType?N:"facebook"===n.browserType?H:Object(E.f)()?z:Object(E.e)()?q:!n.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname?j:L,n.subscriptionManager=new e(n.config,n.api,n.trigger.bind(n)),n.config.customCss){var t=document.createElement("style");t.innerHTML=n.config.customCss,document.body.appendChild(t)}n.config.showNotificationBell&&(("Android"===E.h.name||"mobile"===E.c.type)&&n.config.hideNotificationBellMobile||(n.bell=new G(n.config,n.subscriptionManager,n.api,null,n.trigger.bind(n)),n.bell.handleLoadSdk=function(){return new y.a((function(e,t){var i=document.createElement("script");i.async=!0,i.onload=function(){window.CleverPush.init(Object.assign({},n.config,{loadConfigUrl:void 0,loadConfig:!1,loadIframe:!1})),e()},i.onerror=function(){t()},i.src=n.config.loadSdkUrl||"https://static.cleverpush.com/channel/loader/"+n.config.channelId+".js",document.head.appendChild(i)}))},n.subscriptionManager.isSubscribed().then((function(e){n.bell&&n.bell.show(e)})),n.on(T.a.SUBSCRIBED,(function(){n.bell&&n.bell.reset(!0)})),n.on(T.a.UNSUBSCRIBED,(function(){n.subscriptionManager.subscribed=!1,n.bell&&n.bell.reset(!1)}))))})).catch((function(e){i(e)}))})),v.a.debug("Init done"),n.initialized=!0,n.initCalled=!1,i(!1,!0)}))):i(new S.a("Required attribute `channelId` in `config` not given.","invalid-config")))}}]),t}(g.a);window.CleverPushBell=new Z,n.d(t,"default",(function(){return J}));var J=function(e){function t(){var e;return s()(this,t),(e=l()(this,f()(t).call(this))).config={},e.log=v.a,e.initialized=!1,e.initCalled=!1,e.api=null,e.subscriptionManager=null,e.version="0.6.1",e}return p()(t,e),c()(t,[{key:"init",value:function(e,t){var n=this;Object(v.b)("init",e),v.a.info("Browser:",E.a.name,E.b);var i,o=function(e,i){var r=void 0!==i?i:!e;"function"==typeof t?t(e,r):e&&(e.warn||"unsupported-browser"===e.reason||"private-mode"===e.reason||"already-initialized"===e.reason||"init-already-called"===e.reason?v.a.warn(e.message):v.a.error(e)),"function"==typeof window.cleverPushInitCallback&&window.cleverPushInitCallback(e,r),e&&n.trigger(T.a.INITIALIZATION_FAILED)};if(this.initCalled)o(new S.a("Init was already called, please only call init() once.","init-already-called"),!1);else if(this.initCalled=!0,"object"!==r()(e))o(new S.a("Required parameter `config` not given.","invalid-config"));else if(e.channelId)if(this.initialized)o(new S.a("CleverPush SDK was already initialized.","already-initialized"));else{this.api=new I(e.channelId),e.apiEndpoint&&(this.api.endpoint=e.apiEndpoint);this.config=e,i="safari"===n.browserType?N:"facebook"===n.browserType?H:Object(E.f)()?z:Object(E.e)()?q:!n.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname?j:L,n.subscriptionManager=new i(n.config,n.api,n.trigger.bind(n)),v.a.debug("Init done"),this.initialized=!0,this.initCalled=!1,o(!1,!0)}else o(new S.a("Required attribute `channelId` in `config` not given.","invalid-config"))}},{key:"initHttpIframe",value:function(e,t){return this.init(e,t)}}]),t}(g.a);window.CleverPush=new J}]);</script>

    <script>
        CleverPush.initHttpIframe({
            channelId: '9nsSYmLaJtzaNE2ay',
            channelSubdomain: 'statistacomdev',
            channelDomain: 'https://www.statista.com/',
        });
    </script>
</head>
<body>


</body></html>